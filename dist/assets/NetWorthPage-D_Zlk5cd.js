import{r as l,u as Pe,b as Be,c as Ge,l as Ve,s as ze,j as r,f as W}from"./index-BQlekTb3.js";import{c as D,p as J,a as Ue,i as He,s as G,b as Ye,d as Ze,e as Ae,f as Je,g as Xe,h as $,j as qe,k as Qe,l as et,m as tt,n as Ne,o as at,q as nt,r as rt,t as st,u as Ce,v as ot,w as lt,x as it,y as Se,z as ct,A as le,D as Oe,B as Ee,E as dt,S as ut,F as ke,G as Y,H as mt,I as ie,L as U,Z as De,J as ce,K as pt,M as ft,N as ht,O as vt,P as pe,Q as fe,U as X,V as yt,W as gt,_ as bt,$ as xt,a0 as jt,a1 as wt,a2 as Pt,a3 as At,a4 as Nt,a5 as Ct,a6 as St,a7 as Ot,a8 as Et,a9 as Z,aa as ne,ab as he,ac as kt,ad as Dt,ae as It,af as Tt,ag as Rt,ah as Lt,ai as Mt,aj as _t,ak as Kt,al as $t,am as Ft,R as de,C as Wt,X as Ie,Y as Te,T as Re,an as re}from"./CartesianChart-CVUQNuER.js";import{A as Le,a as Me}from"./AreaChart-7I712yPq.js";var _e=e=>e.graphicalItems.polarItems,Bt=D([J,Ue],He),Q=D([_e,G,Bt],Ye),Gt=D([Q],Ze),ee=D([Gt,Ae],Je),Vt=D([ee,G,Q],Xe);D([ee,G,Q],(e,t,a)=>a.length>0?e.flatMap(n=>a.flatMap(s=>{var o,c=$(n,(o=t.dataKey)!==null&&o!==void 0?o:s.dataKey);return{value:c,errorDomain:[]}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:$(n,t.dataKey),errorDomain:[]})):e.map(n=>({value:n,errorDomain:[]})));var ve=()=>{},zt=D([ee,G,Q,qe,J],Qe),Ut=D([G,et,tt,ve,zt,ve,Ne,J],at),Ke=D([G,Ne,ee,Vt,nt,J,Ut],rt),Ht=D([Ke,st,Ce],ot),Yt=D([G,Ke,Ht,J],lt);D([Ce,Yt],it);function ye(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),a.push.apply(a,n)}return a}function ge(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?ye(Object(a),!0).forEach(function(n){Zt(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ye(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function Zt(e,t,a){return(t=Jt(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Jt(e){var t=Xt(e,"string");return typeof t=="symbol"?t:t+""}function Xt(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var qt=(e,t)=>t,ue=D([_e,qt],(e,t)=>e.filter(a=>a.type==="pie").find(a=>a.id===t)),Qt=[],me=(e,t,a)=>(a==null?void 0:a.length)===0?Qt:a,$e=D([Ae,ue,me],(e,t,a)=>{var{chartData:n}=e;if(t!=null){var s;if((t==null?void 0:t.data)!=null&&t.data.length>0?s=t.data:s=n,(!s||!s.length)&&a!=null&&(s=a.map(o=>ge(ge({},t.presentationProps),o.props))),s!=null)return s}}),ea=D([$e,ue,me],(e,t,a)=>{if(!(e==null||t==null))return e.map((n,s)=>{var o,c=$(n,t.nameKey,t.name),d;return a!=null&&(o=a[s])!==null&&o!==void 0&&(o=o.props)!==null&&o!==void 0&&o.fill?d=a[s].props.fill:typeof n=="object"&&n!=null&&"fill"in n?d=n.fill:d=t.fill,{value:Se(c,t.dataKey),color:d,payload:n,type:t.legendType}})}),ta=D([$e,ue,me,ct],(e,t,a,n)=>{if(!(t==null||e==null))return ja({offset:n,pieSettings:t,displayedData:e,cells:a})}),aa=["key"],na=["onMouseEnter","onClick","onMouseLeave"],ra=["id"],sa=["id"];function be(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),a.push.apply(a,n)}return a}function A(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?be(Object(a),!0).forEach(function(n){oa(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):be(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function oa(e,t,a){return(t=la(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function la(e){var t=ia(e,"string");return typeof t=="symbol"?t:t+""}function ia(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function B(){return B=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)({}).hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},B.apply(null,arguments)}function te(e,t){if(e==null)return{};var a,n,s=ca(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}function ca(e,t){if(e==null)return{};var a={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;a[n]=e[n]}return a}function da(e){var t=l.useMemo(()=>ke(e.children,ce),[e.children]),a=Y(n=>ea(n,e.id,t));return a==null?null:l.createElement(mt,{legendPayload:a})}var ua=l.memo(e=>{var{dataKey:t,nameKey:a,sectors:n,stroke:s,strokeWidth:o,fill:c,name:d,hide:i,tooltipType:u,id:b}=e,j={dataDefinedOnItem:n.map(f=>f.tooltipPayload),getPosition:f=>{var w;return(w=n[Number(f)])===null||w===void 0?void 0:w.tooltipPosition},settings:{stroke:s,strokeWidth:o,fill:c,dataKey:t,nameKey:a,name:Se(d,t),hide:i,type:u,color:c,unit:"",graphicalItemId:b}};return l.createElement(pt,{tooltipEntrySettings:j})}),ma=(e,t)=>e>t?"start":e<t?"end":"middle",pa=(e,t,a)=>typeof t=="function"?Z(t(e),a,a*.8):Z(t,a,a*.8),fa=(e,t,a)=>{var{top:n,left:s,width:o,height:c}=t,d=Et(o,c),i=s+Z(e.cx,o,o/2),u=n+Z(e.cy,c,c/2),b=Z(e.innerRadius,d,0),j=pa(a,e.outerRadius,d),f=e.maxRadius||Math.sqrt(o*o+c*c)/2;return{cx:i,cy:u,innerRadius:b,outerRadius:j,maxRadius:f}},ha=(e,t)=>{var a=X(t-e),n=Math.min(Math.abs(t-e),360);return a*n},va=(e,t)=>{if(l.isValidElement(e))return l.cloneElement(e,t);if(typeof e=="function")return e(t);var a=ie("recharts-pie-label-line",typeof e!="boolean"?e.className:""),{key:n}=t,s=te(t,aa);return l.createElement(kt,B({},s,{type:"linear",className:a}))},ya=(e,t,a)=>{if(l.isValidElement(e))return l.cloneElement(e,t);var n=a;if(typeof e=="function"&&(n=e(t),l.isValidElement(n)))return n;var s=ie("recharts-pie-label-text",Dt(e));return l.createElement(It,B({},t,{alignmentBaseline:"middle",className:s}),n)};function ga(e){var{sectors:t,props:a,showLabels:n}=e,{label:s,labelLine:o,dataKey:c}=a;if(!n||!s||!t)return null;var d=Ee(a),i=he(s),u=he(o),b=typeof s=="object"&&"offsetRadius"in s&&typeof s.offsetRadius=="number"&&s.offsetRadius||20,j=t.map((f,w)=>{var E=(f.startAngle+f.endAngle)/2,v=ne(f.cx,f.cy,f.outerRadius+b,E),m=A(A(A(A({},d),f),{},{stroke:"none"},i),{},{index:w,textAnchor:ma(v.x,f.cx)},v),y=A(A(A(A({},d),f),{},{fill:"none",stroke:f.fill},u),{},{index:w,points:[ne(f.cx,f.cy,f.outerRadius,E),v],key:"line"});return l.createElement(De,{zIndex:Oe.label,key:"label-".concat(f.startAngle,"-").concat(f.endAngle,"-").concat(f.midAngle,"-").concat(w)},l.createElement(U,null,o&&va(o,y),ya(s,m,$(f,c))))});return l.createElement(U,{className:"recharts-pie-labels"},j)}function ba(e){var{sectors:t,props:a,showLabels:n}=e,{label:s}=a;return typeof s=="object"&&s!=null&&"position"in s?l.createElement(Ot,{label:s}):l.createElement(ga,{sectors:t,props:a,showLabels:n})}function xa(e){var{sectors:t,activeShape:a,inactiveShape:n,allOtherPieProps:s,shape:o,id:c}=e,d=Y(gt),i=Y(bt),u=Y(xt),{onMouseEnter:b,onClick:j,onMouseLeave:f}=s,w=te(s,na),E=jt(b,s.dataKey,c),v=wt(f),m=Pt(j,s.dataKey,c);return t==null||t.length===0?null:l.createElement(l.Fragment,null,t.map((y,h)=>{if((y==null?void 0:y.startAngle)===0&&(y==null?void 0:y.endAngle)===0&&t.length!==1)return null;var k=u==null||u===c,N=String(h)===d&&(i==null||s.dataKey===i)&&k,I=d?n:null,C=a&&N?a:I,S=A(A({},y),{},{stroke:y.stroke,tabIndex:-1,[Nt]:h,[At]:c});return l.createElement(U,B({key:"sector-".concat(y==null?void 0:y.startAngle,"-").concat(y==null?void 0:y.endAngle,"-").concat(y.midAngle,"-").concat(h),tabIndex:-1,className:"recharts-pie-sector"},Ct(w,y,h),{onMouseEnter:E(y,h),onMouseLeave:v(y,h),onClick:m(y,h)}),l.createElement(St,B({option:o??C,index:h,shapeType:"sector",isActive:N},S)))}))}function ja(e){var t,{pieSettings:a,displayedData:n,cells:s,offset:o}=e,{cornerRadius:c,startAngle:d,endAngle:i,dataKey:u,nameKey:b,tooltipType:j}=a,f=Math.abs(a.minAngle),w=ha(d,i),E=Math.abs(w),v=n.length<=1?0:(t=a.paddingAngle)!==null&&t!==void 0?t:0,m=n.filter(C=>$(C,u,0)!==0).length,y=(E>=360?m:m-1)*v,h=E-m*f-y,k=n.reduce((C,S)=>{var O=$(S,u,0);return C+(fe(O)?O:0)},0),N;if(k>0){var I;N=n.map((C,S)=>{var O=$(C,u,0),_=$(C,b,S),T=fa(a,o,C),L=(fe(O)?O:0)/k,M,p=A(A({},C),s&&s[S]&&s[S].props);S?M=I.endAngle+X(w)*v*(O!==0?1:0):M=d;var g=M+X(w)*((O!==0?f:0)+L*h),P=(M+g)/2,x=(T.innerRadius+T.outerRadius)/2,R=[{name:_,value:O,payload:p,dataKey:u,type:j,graphicalItemId:a.id}],K=ne(T.cx,T.cy,x,P);return I=A(A(A(A({},a.presentationProps),{},{percent:L,cornerRadius:typeof c=="string"?parseFloat(c):c,name:_,tooltipPayload:R,midAngle:P,middleRadius:x,tooltipPosition:K},p),T),{},{value:O,dataKey:u,startAngle:M,endAngle:g,payload:p,paddingAngle:X(w)*v}),I})}return N}function wa(e){var{showLabels:t,sectors:a,children:n}=e,s=l.useMemo(()=>!t||!a?[]:a.map(o=>({value:o.value,payload:o.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:o.cx,cy:o.cy,innerRadius:o.innerRadius,outerRadius:o.outerRadius,startAngle:o.startAngle,endAngle:o.endAngle,clockWise:!1},fill:o.fill})),[a,t]);return l.createElement(yt,{value:t?s:void 0},n)}function Pa(e){var{props:t,previousSectorsRef:a,id:n}=e,{sectors:s,isAnimationActive:o,animationBegin:c,animationDuration:d,animationEasing:i,activeShape:u,inactiveShape:b,onAnimationStart:j,onAnimationEnd:f}=t,w=ft(t,"recharts-pie-"),E=a.current,[v,m]=l.useState(!1),y=l.useCallback(()=>{typeof f=="function"&&f(),m(!1)},[f]),h=l.useCallback(()=>{typeof j=="function"&&j(),m(!0)},[j]);return l.createElement(wa,{showLabels:!v,sectors:s},l.createElement(ht,{animationId:w,begin:c,duration:d,isActive:o,easing:i,onAnimationStart:h,onAnimationEnd:y,key:w},k=>{var N,I=[],C=s&&s[0],S=(N=C==null?void 0:C.startAngle)!==null&&N!==void 0?N:0;return s==null||s.forEach((O,_)=>{var T=E&&E[_],L=_>0?vt(O,"paddingAngle",0):0;if(T){var M=pe(T.endAngle-T.startAngle,O.endAngle-O.startAngle,k),p=A(A({},O),{},{startAngle:S+L,endAngle:S+M+L});I.push(p),S=p.endAngle}else{var{endAngle:g,startAngle:P}=O,x=pe(0,g-P,k),R=A(A({},O),{},{startAngle:S+L,endAngle:S+x+L});I.push(R),S=R.endAngle}}),a.current=I,l.createElement(U,null,l.createElement(xa,{sectors:I,activeShape:u,inactiveShape:b,allOtherPieProps:t,shape:t.shape,id:n}))}),l.createElement(ba,{showLabels:!v,sectors:s,props:t}),t.children)}var Aa={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:Oe.area};function Na(e){var{id:t}=e,a=te(e,ra),{hide:n,className:s,rootTabIndex:o}=e,c=l.useMemo(()=>ke(e.children,ce),[e.children]),d=Y(b=>ta(b,t,c)),i=l.useRef(null),u=ie("recharts-pie",s);return n||d==null?(i.current=null,l.createElement(U,{tabIndex:o,className:u})):l.createElement(De,{zIndex:e.zIndex},l.createElement(ua,{dataKey:e.dataKey,nameKey:e.nameKey,sectors:d,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,tooltipType:e.tooltipType,id:t}),l.createElement(U,{tabIndex:o,className:u},l.createElement(Pa,{props:A(A({},a),{},{sectors:d}),previousSectorsRef:i,id:t})))}function Fe(e){var t=le(e,Aa),{id:a}=t,n=te(t,sa),s=Ee(n);return l.createElement(dt,{id:a,type:"pie"},o=>l.createElement(l.Fragment,null,l.createElement(ut,{type:"pie",id:o,data:n.data,dataKey:n.dataKey,hide:n.hide,angleAxisId:0,radiusAxisId:0,name:n.name,nameKey:n.nameKey,tooltipType:n.tooltipType,legendType:n.legendType,fill:n.fill,cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,paddingAngle:n.paddingAngle,minAngle:n.minAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius,cornerRadius:n.cornerRadius,presentationProps:s,maxRadius:t.maxRadius}),l.createElement(da,B({},n,{id:o})),l.createElement(Na,B({},n,{id:o}))))}Fe.displayName="Pie";function Ca(e){var t=Tt();return l.useEffect(()=>{t(Rt(e))},[t,e]),null}var Sa=["layout"];function se(){return se=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)({}).hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},se.apply(null,arguments)}function Oa(e,t){if(e==null)return{};var a,n,s=Ea(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}function Ea(e,t){if(e==null)return{};var a={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;a[n]=e[n]}return a}var ka={top:5,right:5,bottom:5,left:5},We={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:ka,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},Da=l.forwardRef(function(t,a){var n,s=le(t.categoricalChartProps,We),{layout:o}=s,c=Oa(s,Sa),{chartName:d,defaultTooltipEventType:i,validateTooltipEventTypes:u,tooltipPayloadSearcher:b}=t,j={chartName:d,defaultTooltipEventType:i,validateTooltipEventTypes:u,tooltipPayloadSearcher:b,eventEmitter:void 0};return l.createElement(Lt,{preloadedState:{options:j},reduxStoreName:(n=s.id)!==null&&n!==void 0?n:d},l.createElement(Mt,{chartData:s.data}),l.createElement(_t,{layout:o,margin:s.margin}),l.createElement(Kt,{baseValue:void 0,accessibilityLayer:s.accessibilityLayer,barCategoryGap:s.barCategoryGap,maxBarSize:s.maxBarSize,stackOffset:s.stackOffset,barGap:s.barGap,barSize:s.barSize,syncId:s.syncId,syncMethod:s.syncMethod,className:s.className,reverseStackOrder:s.reverseStackOrder}),l.createElement(Ca,{cx:s.cx,cy:s.cy,startAngle:s.startAngle,endAngle:s.endAngle,innerRadius:s.innerRadius,outerRadius:s.outerRadius}),l.createElement($t,se({},c,{ref:a})))});function xe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),a.push.apply(a,n)}return a}function je(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?xe(Object(a),!0).forEach(function(n){Ia(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):xe(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function Ia(e,t,a){return(t=Ta(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Ta(e){var t=Ra(e,"string");return typeof t=="symbol"?t:t+""}function Ra(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var La=["item"],Ma=je(je({},We),{},{layout:"centric",startAngle:0,endAngle:360}),_a=l.forwardRef((e,t)=>{var a=le(e,Ma);return l.createElement(Da,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:La,tooltipPayloadSearcher:Ft,categoricalChartProps:a,ref:t})});const Ka=["ðŸ ","ðŸš—","ðŸ’°","ðŸ“ˆ","ðŸ¦","ðŸ’Ž","ðŸª™","ðŸ¢","ðŸ’¼","ðŸŽ¨","âŒš","ðŸï¸","ðŸ”‘","ðŸ“±","ðŸ–¥ï¸","ðŸŽµ"],oe=["Property","Cash & Savings","Investments","Pension","Vehicle","Crypto","Collectibles","Business"],z=["#22d3ee","#8b5cf6","#10b981","#f59e0b","#3b82f6","#ec4899","#ef4444","#06b6d4","#a855f7","#14b8a6","#f97316","#6366f1"],$a={Property:"#22d3ee","Cash & Savings":"#10b981",Investments:"#8b5cf6",Pension:"#f59e0b",Vehicle:"#3b82f6",Crypto:"#ec4899",Collectibles:"#ef4444",Business:"#06b6d4"};function Fa(e,t){return $a[e]||z[t%z.length]}function Wa(){return Math.random().toString(36).substring(2,10)+Date.now().toString(36)}function q(){return new Date().toISOString()}function Ba(){const e=new Date;return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`}function ae(e){return new Date(e+"T00:00:00").toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})}function F(e){if(!e.snapshots.length)return 0;const t=[...e.snapshots].sort((a,n)=>a.date.localeCompare(n.date));return t[t.length-1].value}const Ga={version:1,assets:[],customTypes:[],lastModified:q()};function Va({value:e,onChange:t}){const[a,n]=l.useState(!1),s=l.useRef(null);return l.useEffect(()=>{const o=c=>{s.current&&!s.current.contains(c.target)&&n(!1)};return a&&document.addEventListener("mousedown",o),()=>document.removeEventListener("mousedown",o)},[a]),r.jsxs("div",{className:"nw-emoji-picker",ref:s,children:[r.jsx("button",{className:"nw-emoji-btn",onClick:()=>n(!a),type:"button",title:"Choose icon",children:e}),a&&r.jsx("div",{className:"nw-emoji-dropdown",children:Ka.map(o=>r.jsx("button",{className:`nw-emoji-option ${o===e?"nw-emoji-option--active":""}`,onClick:()=>{t(o),n(!1)},type:"button",children:o},o))})]})}function za({value:e,onChange:t,customTypes:a}){const[n,s]=l.useState(""),[o,c]=l.useState(!1),d=l.useMemo(()=>{const i=new Set([...a,...oe]);return Array.from(i)},[a]);return r.jsx("div",{className:"nw-type-selector",children:o?r.jsxs("div",{className:"nw-custom-type-row",children:[r.jsx("input",{className:"nw-input",value:n,onChange:i=>s(i.target.value),placeholder:"Enter custom typeâ€¦",autoFocus:!0,onKeyDown:i=>{i.key==="Enter"&&n.trim()?(t(n.trim()),c(!1),s("")):i.key==="Escape"&&c(!1)}}),r.jsx("button",{className:"nw-btn-sm",onClick:()=>{n.trim()&&(t(n.trim()),c(!1),s(""))},type:"button",children:"Add"}),r.jsx("button",{className:"nw-btn-sm nw-btn-sm--muted",onClick:()=>c(!1),type:"button",children:"Cancel"})]}):r.jsx(r.Fragment,{children:r.jsxs("select",{className:"nw-select",value:e,onChange:i=>{i.target.value==="__custom__"?c(!0):t(i.target.value)},children:[r.jsx("option",{value:"__custom__",children:"+ Custom Type"}),d.map(i=>r.jsx("option",{value:i,children:i},i))]})})})}function we({initial:e,customTypes:t,onSave:a,onCancel:n,onNewCustomType:s}){const[o,c]=l.useState((e==null?void 0:e.emoji)||"ðŸ’°"),[d,i]=l.useState((e==null?void 0:e.name)||""),[u,b]=l.useState((e==null?void 0:e.type)||oe[0]),[j,f]=l.useState(e?String(F(e)):""),[w,E]=l.useState(e!=null&&e.snapshots.length?[...e.snapshots].sort((h,k)=>k.date.localeCompare(h.date))[0].date:Ba()),{currency:v}=Pe(),m=l.useCallback(h=>{b(h),oe.includes(h)||s(h)},[s]),y=()=>{if(!d.trim())return;const h=Number(j.replace(/,/g,""));if(isNaN(h))return;const k=e?e.snapshots.filter(C=>C.date!==w):[],N=q(),I={id:(e==null?void 0:e.id)||Wa(),emoji:o,name:d.trim(),type:u,snapshots:[...k,{date:w,value:h}].sort((C,S)=>C.date.localeCompare(S.date)),createdAt:(e==null?void 0:e.createdAt)||N,updatedAt:N};a(I)};return r.jsxs("div",{className:"nw-form",children:[r.jsxs("div",{className:"nw-form-row",children:[r.jsx(Va,{value:o,onChange:c}),r.jsx("input",{className:"nw-input nw-input--name",value:d,onChange:h=>i(h.target.value),placeholder:"Asset name",autoFocus:!0})]}),r.jsxs("div",{className:"nw-form-row",children:[r.jsx("label",{className:"nw-form-label",children:"Type"}),r.jsx(za,{value:u,onChange:m,customTypes:t})]}),r.jsxs("div",{className:"nw-form-row",children:[r.jsx("label",{className:"nw-form-label",children:"Value"}),r.jsxs("div",{className:"nw-value-row",children:[r.jsx("span",{className:"nw-currency-prefix",children:v.symbol}),r.jsx("input",{className:"nw-input nw-input--value",value:j,onChange:h=>f(h.target.value),placeholder:"0",inputMode:"numeric"}),r.jsx("span",{className:"nw-form-label",style:{marginLeft:12},children:"as of"}),r.jsx("input",{className:"nw-input nw-input--date",type:"date",value:w,onChange:h=>E(h.target.value)})]})]}),r.jsxs("div",{className:"nw-form-actions",children:[r.jsx("button",{className:"ps-btn ps-btn--primary",onClick:y,type:"button",children:e?"Save Changes":"Add Asset"}),r.jsx("button",{className:"ps-btn ps-btn--secondary",onClick:n,type:"button",children:"Cancel"})]})]})}function Ua({asset:e,currencyCode:t,onDelete:a,onClose:n}){const[s,o]=l.useState(null),c=l.useRef(null);l.useEffect(()=>{const i=u=>{c.current&&!c.current.contains(u.target)&&n()};return document.addEventListener("mousedown",i),()=>document.removeEventListener("mousedown",i)},[n]);const d=[...e.snapshots].sort((i,u)=>u.date.localeCompare(i.date));return r.jsx("div",{className:"nw-history-overlay",children:r.jsxs("div",{className:"nw-history-popup",ref:c,children:[r.jsxs("div",{className:"nw-history-header",children:[r.jsxs("span",{className:"nw-history-title",children:[e.emoji," ",e.name," â€” History"]}),r.jsx("button",{className:"nw-history-close",onClick:n,children:"Ã—"})]}),r.jsxs("div",{className:"nw-history-list",children:[d.length===0&&r.jsx("div",{className:"nw-history-empty",children:"No entries yet."}),d.map(i=>r.jsxs("div",{className:"nw-history-row",children:[r.jsx("span",{className:"nw-history-date",children:ae(i.date)}),r.jsx("span",{className:`nw-history-value${i.value<0?" nw-history-value--neg":""}`,children:W(i.value,t)}),s===i.date?r.jsxs("div",{className:"nw-history-confirm",children:[r.jsx("span",{className:"nw-history-confirm-text",children:"Permanent. Delete?"}),r.jsx("button",{className:"nw-history-confirm-yes",onClick:u=>{u.stopPropagation(),a(e.id,i.date),o(null)},children:"Yes"}),r.jsx("button",{className:"nw-history-confirm-no",onClick:u=>{u.stopPropagation(),o(null)},children:"No"})]}):r.jsx("button",{className:"nw-history-del",onClick:u=>{u.stopPropagation(),o(i.date)},title:"Remove entry",children:"Ã—"})]},i.date))]})]})})}function Ha({asset:e,color:t,currencyCode:a,onEdit:n,onDelete:s,onShowHistory:o}){const c=F(e),d=e.snapshots.length?[...e.snapshots].sort((i,u)=>u.date.localeCompare(i.date))[0].date:"";return r.jsxs("div",{className:"nw-asset-card",children:[r.jsxs("div",{className:"nw-asset-left",children:[r.jsx("span",{className:"nw-asset-emoji",style:{background:`${t}18`},children:e.emoji}),r.jsxs("div",{className:"nw-asset-info",children:[r.jsx("span",{className:"nw-asset-name",children:e.name}),r.jsx("span",{className:"nw-asset-type",children:e.type})]})]}),r.jsxs("div",{className:"nw-asset-right",children:[r.jsxs("div",{className:"nw-asset-value-col",children:[r.jsx("span",{className:`nw-asset-value${c<0?" nw-asset-value--neg":""}`,children:W(c,a)}),d&&r.jsxs("span",{className:"nw-asset-date",children:["as of ",ae(d)]})]}),r.jsxs("div",{className:"nw-asset-actions",children:[r.jsx("button",{className:"nw-action-btn",onClick:i=>{i.stopPropagation(),o()},title:"Show history",children:"History"}),r.jsx("button",{className:"nw-action-btn",onClick:i=>{i.stopPropagation(),n()},title:"Update",children:"Update"}),r.jsx("button",{className:"nw-action-btn nw-action-btn--del",onClick:i=>{i.stopPropagation(),s()},title:"Remove",children:"Ã—"})]})]})]})}function Ya({asset:e,currencyCode:t,color:a}){if(e.snapshots.length<2)return null;const n=[...e.snapshots].sort((s,o)=>s.date.localeCompare(o.date)).map(s=>({date:ae(s.date),value:s.value}));return r.jsx("div",{className:"nw-asset-chart",children:r.jsx(de,{width:"100%",height:120,children:r.jsxs(Le,{data:n,margin:{top:4,right:8,left:8,bottom:0},children:[r.jsx("defs",{children:r.jsxs("linearGradient",{id:`grad-${e.id}`,x1:"0",y1:"0",x2:"0",y2:"1",children:[r.jsx("stop",{offset:"0%",stopColor:a,stopOpacity:.3}),r.jsx("stop",{offset:"100%",stopColor:a,stopOpacity:.03})]})}),r.jsx(Ie,{dataKey:"date",tick:{fill:"var(--text-muted)",fontSize:9},tickLine:!1,axisLine:!1}),r.jsx(Te,{hide:!0,domain:["dataMin","dataMax"]}),r.jsx(Re,{contentStyle:{background:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:8,fontSize:12},formatter:s=>s!=null?W(s,t):"",labelStyle:{color:"var(--text-muted)"}}),r.jsx(Me,{type:"monotone",dataKey:"value",stroke:a,strokeWidth:2,fill:`url(#grad-${e.id})`,dot:{fill:a,r:3}})]})})})}function Za({assets:e,currencyCode:t}){const a=new Set;for(const o of e)for(const c of o.snapshots)a.add(c.date);const n=Array.from(a).sort();if(n.length<2)return null;const s=n.map(o=>{let c=0;for(const d of e){const i=[...d.snapshots].sort((b,j)=>b.date.localeCompare(j.date));let u=0;for(const b of i)b.date<=o&&(u=b.value);c+=u}return{date:ae(o),total:c}});return r.jsx("div",{className:"nw-net-chart-wrap",children:r.jsx(de,{width:"100%",height:260,children:r.jsxs(Le,{data:s,margin:{top:10,right:10,left:10,bottom:0},children:[r.jsx("defs",{children:r.jsxs("linearGradient",{id:"nwGrad",x1:"0",y1:"0",x2:"0",y2:"1",children:[r.jsx("stop",{offset:"0%",stopColor:"#22d3ee",stopOpacity:.3}),r.jsx("stop",{offset:"100%",stopColor:"#22d3ee",stopOpacity:.02})]})}),r.jsx(Wt,{strokeDasharray:"3 3",stroke:"var(--border-color)",vertical:!1}),r.jsx(Ie,{dataKey:"date",tick:{fill:"var(--text-muted)",fontSize:10},tickLine:!1,axisLine:{stroke:"var(--border-color)"}}),r.jsx(Te,{tick:{fill:"var(--text-muted)",fontSize:11},axisLine:!1,tickLine:!1,tickFormatter:o=>o>=1e6?`${(o/1e6).toFixed(1)}M`:o>=1e3?`${(o/1e3).toFixed(0)}K`:String(o)}),r.jsx(Re,{contentStyle:{background:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:8,fontSize:12},formatter:o=>o!=null?W(o,t):"",labelStyle:{color:"var(--text-muted)"}}),r.jsx(Me,{type:"monotone",dataKey:"total",stroke:"#22d3ee",strokeWidth:2.5,fill:"url(#nwGrad)",name:"Net Worth",dot:{fill:"#22d3ee",r:3}})]})})})}function Ja(e){const{cx:t,cy:a,innerRadius:n,outerRadius:s,startAngle:o,endAngle:c,fill:d}=e;return r.jsxs("g",{children:[r.jsx(re,{cx:t,cy:a,innerRadius:n,outerRadius:s+8,startAngle:o,endAngle:c,fill:d}),r.jsx(re,{cx:t,cy:a,innerRadius:s+10,outerRadius:s+14,startAngle:o,endAngle:c,fill:d})]})}function Xa(e){return t=>{const{index:a}=t;if(a===e)return Ja(t);const{cx:n,cy:s,innerRadius:o,outerRadius:c,startAngle:d,endAngle:i,fill:u}=t;return r.jsx(re,{cx:n,cy:s,innerRadius:o,outerRadius:c,startAngle:d,endAngle:i,fill:u})}}function qa({assets:e,currencyCode:t}){const[a,n]=l.useState("type"),[s,o]=l.useState(void 0),c=l.useMemo(()=>{const v=new Map;for(const m of e){const y=F(m);v.has(m.type)||v.set(m.type,{name:m.type,value:0,items:[]});const h=v.get(m.type);h.value+=Math.abs(y),h.items.push({name:m.name,value:y})}return Array.from(v.values()).filter(m=>m.value>0)},[e]),d=l.useMemo(()=>c.map((v,m)=>Fa(v.name,m)),[c]),i=l.useMemo(()=>{let v=0,m=0;const y=[],h=[];for(const k of e){const N=F(k);N>=0?(v+=N,y.push({name:k.name,value:N})):(m+=Math.abs(N),h.push({name:k.name,value:N}))}return{slices:[{name:"Assets",value:v,items:y},...m>0?[{name:"Debts",value:m,items:h}]:[]],debtPct:v+m>0?m/(v+m)*100:0}},[e]),u=["#3b82f6","#ef4444"],b=a==="type"?c:i.slices,j=a==="type"?d:u,f=s!=null?b[s]:null,w=l.useMemo(()=>b.map(({name:v,value:m})=>({name:v,value:m})),[b]),E=l.useMemo(()=>Xa(s),[s]);return r.jsxs("div",{className:"nw-donut-view",children:[r.jsxs("div",{className:"nw-donut-header",children:[r.jsx("span",{className:"nw-donut-title",children:"Portfolio Breakdown"}),r.jsxs("div",{className:"nw-donut-toggle",children:[r.jsx("button",{className:`nw-donut-toggle-btn${a==="type"?" nw-donut-toggle-btn--active":""}`,onClick:()=>{n("type"),o(void 0)},children:"Asset Type"}),r.jsx("button",{className:`nw-donut-toggle-btn${a==="debt"?" nw-donut-toggle-btn--active":""}`,onClick:()=>{n("debt"),o(void 0)},children:"Debts / Assets"})]})]}),a==="debt"&&i.debtPct>0&&r.jsxs("div",{className:"nw-debt-banner",children:[r.jsxs("span",{className:"nw-debt-pct",children:[i.debtPct.toFixed(1),"%"]}),r.jsx("span",{className:"nw-debt-label",children:"of your portfolio is debt"})]}),r.jsx("div",{className:"nw-donut-chart-area",children:r.jsx(de,{width:"100%",height:280,children:r.jsx(_a,{children:r.jsx(Fe,{data:w,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",innerRadius:65,outerRadius:110,paddingAngle:2,shape:E,onMouseEnter:(v,m)=>o(m),onMouseLeave:()=>o(void 0),children:w.map((v,m)=>r.jsx(ce,{fill:j[m%j.length]},m))})})})}),f&&r.jsxs("div",{className:"nw-donut-tooltip",children:[r.jsx("span",{className:"nw-donut-tooltip-title",children:f.name}),f.items.map((v,m)=>r.jsxs("div",{className:"nw-donut-tooltip-row",children:[r.jsx("span",{children:v.name}),r.jsx("span",{children:W(v.value,t)})]},m))]}),r.jsx("div",{className:"nw-donut-legend",children:b.map((v,m)=>r.jsxs("div",{className:"nw-donut-legend-item",children:[r.jsx("span",{className:"nw-donut-legend-swatch",style:{background:j[m%j.length]}}),r.jsx("span",{className:"nw-donut-legend-label",children:v.name}),r.jsx("span",{className:"nw-donut-legend-value",children:W(v.value,t)})]},v.name))})]})}function an(){const{currency:e}=Pe(),{user:t}=Be(),[a,n]=Ge("vf-net-worth-data",Ga),s=l.useRef(!1);l.useEffect(()=>{!t||s.current||(s.current=!0,Ve(t.uid).then(p=>{p&&n(p)}).catch(p=>console.error("[net-worth] load failed:",p)))},[t,n]);const o=a.assets,c=a.customTypes,d=l.useCallback(p=>{n(g=>{const x={...p(g),lastModified:q()};return t&&ze(t.uid,x).catch(R=>console.error("[net-worth] save failed:",R)),x})},[n,t]),[i,u]=l.useState(!1),[b,j]=l.useState(null),[f,w]=l.useState(!0),[E,v]=l.useState(null),[m,y]=l.useState(null),[h,k]=l.useState(!1),N=l.useMemo(()=>o.reduce((p,g)=>p+F(g),0),[o]),I=l.useMemo(()=>{const p=new Map;for(const g of o)p.has(g.type)||p.set(g.type,[]),p.get(g.type).push(g);return Array.from(p.entries()).sort((g,P)=>{const x=g[1].reduce((K,V)=>K+F(V),0);return P[1].reduce((K,V)=>K+F(V),0)-x})},[o]),C=l.useCallback(p=>{d(g=>{const P=g.assets.findIndex(x=>x.id===p.id);if(P>=0){const x=[...g.assets];return x[P]=p,{...g,assets:x}}return{...g,assets:[...g.assets,p]}}),u(!1),j(null)},[d]),S=l.useCallback(p=>{d(g=>({...g,assets:g.assets.filter(P=>P.id!==p)}))},[d]),O=l.useCallback((p,g)=>{d(P=>{const x=P.assets.findIndex(H=>H.id===p);if(x<0)return P;const R=P.assets[x],K=R.snapshots.filter(H=>H.date!==g);if(K.length===0)return{...P,assets:P.assets.filter(H=>H.id!==p)};const V=[...P.assets];return V[x]={...R,snapshots:K,updatedAt:q()},{...P,assets:V}})},[d]),_=l.useCallback(p=>{d(g=>g.customTypes.includes(p)?g:{...g,customTypes:[...g.customTypes,p]})},[d]),T=b?o.find(p=>p.id===b):void 0,L=m?o.find(p=>p.id===m):void 0,M=l.useMemo(()=>{const p=new Set;for(const g of o)for(const P of g.snapshots)p.add(P.date);return p.size>=2},[o]);return r.jsx("div",{className:"page-container",children:r.jsxs("div",{className:"ps-page",children:[r.jsxs("div",{className:"nw-header",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"ps-page-title",children:"Net Worth"}),r.jsx("p",{className:"nw-subtitle",children:"Track your assets and watch your wealth grow over time."})]}),r.jsxs("div",{className:"nw-total-card",children:[r.jsx("span",{className:"nw-total-label",children:"Total Net Worth"}),r.jsx("span",{className:`nw-total-value${N<0?" nw-total-value--neg":""}`,children:W(N,e.code)})]})]}),L&&r.jsx(Ua,{asset:L,currencyCode:e.code,onDelete:O,onClose:()=>y(null)}),M&&r.jsxs("div",{className:"ps-card nw-chart-card",children:[r.jsxs("div",{className:"nw-chart-header",children:[r.jsx("h2",{className:"ps-card-title",children:h?"Portfolio Breakdown":"Net Worth Over Time"}),r.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[!h&&r.jsx("button",{className:"nw-toggle-btn",onClick:()=>w(!f),children:f?"Hide Chart":"Show Chart"}),r.jsx("button",{className:"ps-flip-btn",onClick:()=>k(!h),title:h?"Show chart":"Show breakdown",children:h?"ðŸ“ˆ Chart":"ðŸ© Breakdown"})]})]}),r.jsxs("div",{className:`nw-flip-container${h?" nw-flip-container--flipped":""}`,children:[r.jsx("div",{className:"nw-flip-face nw-flip-face--front",children:f&&r.jsx(Za,{assets:o,currencyCode:e.code})}),r.jsx("div",{className:"nw-flip-face nw-flip-face--back",children:r.jsx(qa,{assets:o,currencyCode:e.code})})]})]}),r.jsxs("div",{className:"ps-card nw-assets-card",children:[r.jsxs("div",{className:"nw-assets-header",children:[r.jsx("h2",{className:"ps-card-title",children:"Assets"}),!i&&!b&&r.jsx("button",{className:"nw-add-btn",onClick:()=>u(!0),title:"Add Asset",children:r.jsx("span",{className:"nw-add-icon",children:"+"})})]}),i&&!b&&r.jsx(we,{customTypes:c,onSave:C,onCancel:()=>u(!1),onNewCustomType:_}),b&&T&&r.jsx(we,{initial:T,customTypes:c,onSave:C,onCancel:()=>j(null),onNewCustomType:_}),o.length===0&&!i&&r.jsxs("div",{className:"nw-empty",children:[r.jsx("p",{children:"No assets yet. Add your first asset to start tracking your net worth."}),r.jsxs("button",{className:"nw-add-btn nw-add-btn--large",onClick:()=>u(!0),children:[r.jsx("span",{className:"nw-add-icon",children:"+"}),r.jsx("span",{children:"Add Asset"})]})]}),I.map(([p,g])=>{const P=g.reduce((x,R)=>x+F(R),0);return r.jsxs("div",{className:"nw-type-group",children:[r.jsxs("div",{className:"nw-type-group-header",children:[r.jsx("span",{className:"nw-type-group-name",children:p}),r.jsx("span",{className:"nw-type-group-total",children:W(P,e.code)})]}),g.map(x=>r.jsxs("div",{children:[r.jsx("div",{onClick:()=>v(E===x.id?null:x.id),style:{cursor:x.snapshots.length>=2?"pointer":"default"},children:r.jsx(Ha,{asset:x,color:z[o.indexOf(x)%z.length],currencyCode:e.code,onEdit:()=>j(x.id),onDelete:()=>S(x.id),onShowHistory:()=>y(x.id)})}),E===x.id&&r.jsx(Ya,{asset:x,currencyCode:e.code,color:z[o.indexOf(x)%z.length]})]},x.id))]},p)})]})]})})}export{an as NetWorthPage};
