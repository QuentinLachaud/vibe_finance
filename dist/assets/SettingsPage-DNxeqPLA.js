import{n as S,u as v,b as y,r as m,j as e}from"./index-DB_SPQpN.js";const u="vibe-finance-sim-default-years";function k(){try{const a=localStorage.getItem(u),t=Number(a);if(!Number.isNaN(t))return Math.min(60,Math.max(5,Math.round(t)))}catch{}return 30}function P(){const{theme:a,setTheme:t}=S(),{currency:g,setCurrency:h}=v(),{user:i,logout:j}=y(),[l,r]=m.useState(k),[x,o]=m.useState(""),N=m.useMemo(()=>i?i.displayName||i.email||"Signed in":"Not signed in",[i]),f=()=>{const s=Math.min(60,Math.max(5,Math.round(l)));r(s),localStorage.setItem(u,String(s)),o("Simulation defaults saved.")},p=()=>{const s={theme:a,currency:g.code,simulationYears:l,exportedAt:new Date().toISOString()},d=new Blob([JSON.stringify(s,null,2)],{type:"application/json"}),c=URL.createObjectURL(d),n=document.createElement("a");n.href=c,n.download="vibe-finance-preferences.json",n.click(),URL.revokeObjectURL(c),o("Preferences exported.")},b=()=>{if(!window.confirm("Reset theme, currency, and simulation defaults?"))return;const d="dark",c="GBP",n=30;t(d),h(c),r(n),localStorage.setItem(u,String(n)),o("Preferences reset to defaults.")};return e.jsxs("div",{className:"settings-page",children:[e.jsxs("div",{className:"page-header",children:[e.jsx("h1",{className:"page-title",children:"Settings"}),e.jsx("p",{className:"page-subtitle",children:"Personalize your workspace and defaults."})]}),e.jsxs("div",{className:"settings-grid",children:[e.jsxs("section",{className:"settings-card",children:[e.jsx("h2",{className:"settings-card-title",children:"Account"}),e.jsx("p",{className:"settings-text",children:N}),i&&e.jsx("button",{className:"settings-btn settings-btn--secondary",onClick:j,children:"Sign out"})]}),e.jsxs("section",{className:"settings-card",children:[e.jsx("h2",{className:"settings-card-title",children:"Display"}),e.jsxs("div",{className:"settings-field",children:[e.jsx("label",{className:"settings-label",children:"Theme"}),e.jsxs("div",{className:"settings-segmented",children:[e.jsx("button",{className:`settings-segment ${a==="dark"?"settings-segment--active":""}`,onClick:()=>t("dark"),children:"Dark"}),e.jsx("button",{className:`settings-segment ${a==="light"?"settings-segment--active":""}`,onClick:()=>t("light"),children:"Light"})]})]}),e.jsxs("div",{className:"settings-field",children:[e.jsx("label",{className:"settings-label",htmlFor:"settings-currency",children:"Default currency"}),e.jsxs("select",{id:"settings-currency",className:"settings-select",value:g.code,onChange:s=>h(s.target.value),children:[e.jsx("option",{value:"GBP",children:"£ GBP"}),e.jsx("option",{value:"USD",children:"$ USD"}),e.jsx("option",{value:"EUR",children:"€ EUR"})]})]})]}),e.jsxs("section",{className:"settings-card",children:[e.jsx("h2",{className:"settings-card-title",children:"Portfolio defaults"}),e.jsxs("div",{className:"settings-field",children:[e.jsx("label",{className:"settings-label",htmlFor:"settings-sim-years",children:"Default simulation horizon"}),e.jsxs("div",{className:"settings-inline",children:[e.jsx("input",{id:"settings-sim-years",className:"settings-input",type:"number",min:5,max:60,step:1,value:l,onChange:s=>r(Number(s.target.value||30))}),e.jsx("span",{className:"settings-suffix",children:"years"}),e.jsx("button",{className:"settings-btn settings-btn--primary",onClick:f,children:"Save"})]})]}),e.jsx("p",{className:"settings-note",children:"Used as the default end date in Portfolio Simulator."})]}),e.jsxs("section",{className:"settings-card",children:[e.jsx("h2",{className:"settings-card-title",children:"Data"}),e.jsxs("div",{className:"settings-actions",children:[e.jsx("button",{className:"settings-btn settings-btn--secondary",onClick:p,children:"Export preferences"}),e.jsx("button",{className:"settings-btn settings-btn--secondary",onClick:b,children:"Reset to defaults"})]}),x&&e.jsx("p",{className:"settings-status",children:x})]})]})]})}export{P as SettingsPage};
