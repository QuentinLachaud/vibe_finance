import{u as te,a as ae,r as n,E as se,j as e,L as ie,f as o}from"./index-yKex2MYx.js";import{R as ne,C as le,X as ce,Y as re,T as oe}from"./CartesianChart-j-4oSbR5.js";import{B as de,L as ue,a as Y}from"./BarChart-CkSdoRrb.js";function he(a){const{initialInvestment:d,recurringInvestment:g,recurringFrequency:I,annualGrowthRate:p,annualDepositIncrease:h,years:v,mode:N}=a,C=p/100/12,b=[],M=[];let c=d,m=d,f=0,y=0;const A=N==="withdrawal";for(let L=1;L<=v;L++){const S=Math.pow(1+h/100,L-1);if(I==="monthly"){const s=g*S;for(let x=1;x<=12;x++){if(A){const u=Math.min(s,Math.max(0,c));c-=u,f+=u}else c+=s,m+=s;c*=1+C,y++;const E=c-m+f;M.push({month:y,year:L,monthInYear:x,deposits:Math.round(m),withdrawals:Math.round(f),interest:Math.round(E),totalValue:Math.round(c)})}}else{const s=g*S;if(A){const x=Math.min(s,Math.max(0,c));c-=x,f+=x}else c+=s,m+=s;for(let x=1;x<=12;x++){c*=1+C,y++;const E=c-m+f;M.push({month:y,year:L,monthInYear:x,deposits:Math.round(m),withdrawals:Math.round(f),interest:Math.round(E),totalValue:Math.round(c)})}}const W=c-m+f;b.push({year:L,deposits:Math.round(m),withdrawals:Math.round(f),interest:Math.round(W),totalValue:Math.round(c)})}const T=c-m+f;return{futureValue:Math.round(c),totalInterest:Math.round(T),totalDeposits:Math.round(m),totalWithdrawals:Math.round(f),initialInvestment:d,yearByYear:b,monthByMonth:M}}const K="#60a5fa",me="#7c3aed",_="#f59e0b",xe=[0,1,2,3,4,5];function je({active:a,payload:d,label:g,currencyCode:I}){return!a||!(d!=null&&d.length)?null:e.jsxs("div",{className:"ci-tooltip",children:[e.jsxs("p",{className:"ci-tooltip-title",children:["Year ",g]}),d.map(p=>e.jsxs("p",{className:"ci-tooltip-row",children:[e.jsx("span",{className:"ci-tooltip-swatch",style:{background:p.color}}),p.name,": ",o(p.value,I)]},p.dataKey))]})}function H({value:a,onChange:d,symbol:g,ariaLabel:I}){const[p,h]=n.useState(a.toLocaleString("en-GB"));n.useEffect(()=>{h(a.toLocaleString("en-GB"))},[a]);const v=()=>{const N=Number(p.replace(/,/g,""));!isNaN(N)&&N>=0?d(N):h(a.toLocaleString("en-GB"))};return e.jsxs("div",{className:"ci-currency-input",children:[e.jsx("span",{className:"ci-currency-prefix",children:g}),e.jsx("input",{type:"text",inputMode:"numeric",value:p,onChange:N=>h(N.target.value),onBlur:v,"aria-label":I})]})}function q({value:a,onChange:d,suffix:g,ariaLabel:I,min:p=0,max:h}){const[v,N]=n.useState(String(a));n.useEffect(()=>{N(String(a))},[a]);const C=()=>{let b=Number(v);if(isNaN(b)){N(String(a));return}p!==void 0&&(b=Math.max(p,b)),h!==void 0&&(b=Math.min(h,b)),d(b)};return e.jsxs("div",{className:"ci-numeric-input",children:[e.jsx("input",{type:"text",inputMode:"decimal",value:v,onChange:b=>N(b.target.value),onBlur:C,"aria-label":I}),g&&e.jsx("span",{className:"ci-numeric-suffix",children:g})]})}function D({value:a,className:d}){const[g,I]=n.useState(a);return n.useEffect(()=>{I(a)},[a]),e.jsx("span",{className:`ci-animated-value ${d??""}`,children:g})}const U="vf-compound-interest";function pe(){try{const a=localStorage.getItem(U);if(a)return JSON.parse(a)}catch{}return{}}function be(){const{currency:a}=te(),{gate:d,showLogin:g,onLoginSuccess:I,onLoginClose:p}=ae(),h=n.useMemo(()=>pe(),[]),[v,N]=n.useState(h.initialInvestment??1e4),[C,b]=n.useState(h.recurringInvestment??500),[M,c]=n.useState(h.recurringFrequency??"monthly"),[m,f]=n.useState(h.mode??"deposit"),[y,A]=n.useState(h.annualGrowthRate??6),[T,L]=n.useState(h.annualDepositIncrease??2),[S,W]=n.useState(h.years??30);n.useEffect(()=>{try{localStorage.setItem(U,JSON.stringify({initialInvestment:v,recurringInvestment:C,recurringFrequency:M,mode:m,annualGrowthRate:y,annualDepositIncrease:T,years:S}))}catch{}},[v,C,M,m,y,T,S]);const s=m==="withdrawal",[x,E]=n.useState(!1),[u,P]=n.useState("annual"),[X,J]=n.useState(0),O=v>=0&&C>=0&&y>=0&&y<=100&&S>0&&S<=100,i=n.useMemo(()=>O?he({initialInvestment:v,recurringInvestment:C,recurringFrequency:M,annualGrowthRate:y,annualDepositIncrease:T,years:S,mode:m}):null,[v,C,M,y,T,S,m,O,X]),Q=n.useCallback(()=>{J(t=>t+1)},[]),Z=n.useCallback(()=>{if(!i)return;const t=u==="annual"?i.yearByYear:i.monthByMonth,j=[(u==="annual"?["Year",s?"Withdrawn":"Deposits","Interest","Total Value"]:["Month",s?"Withdrawn":"Deposits","Interest","Total Value"]).join(",")];for(const V of t)if(u==="annual"&&"year"in V){const l=V;j.push([l.year,s?l.withdrawals:l.deposits,l.interest,l.totalValue].join(","))}else if("month"in V){const l=V;j.push([`Y${l.year} M${l.monthInYear}`,s?l.withdrawals:l.deposits,l.interest,l.totalValue].join(","))}const B=new Blob([j.join(`
`)],{type:"text/csv"}),r=URL.createObjectURL(B),F=document.createElement("a");F.href=r,F.download=`compound-interest-${u}.csv`,F.click(),URL.revokeObjectURL(r)},[i,u,s]),ee=n.useCallback(()=>{if(!i)return;const t=new se({unit:"mm",format:"a4"}),R=t.internal.pageSize.getWidth(),j=16,B=R-j*2;let r=16;t.setFillColor(11,17,32),t.rect(0,0,R,30,"F"),t.setFont("helvetica","bold"),t.setFontSize(18),t.setTextColor(241,245,249),t.text("Compound Interest Breakdown",j,14),t.setFont("helvetica","normal"),t.setFontSize(9),t.setTextColor(148,163,184),t.text(`TakeHomeCalc.co.uk  |  ${u==="annual"?"Annual":"Monthly"} View  |  ${s?"Withdrawal":"Deposit"} Mode`,j,22),r=36;const F=u==="annual"?i.yearByYear:i.monthByMonth,V=[u==="annual"?"Year":"Month",s?"Withdrawn":"Deposits","Interest","Total Value"],l=[j+2,j+B*.25,j+B*.5,j+B*.75];t.setFillColor(15,23,41),t.rect(j,r,B,7,"F"),t.setFont("helvetica","bold"),t.setFontSize(7),t.setTextColor(100,116,139),V.forEach((k,z)=>t.text(k,l[z],r+5)),r+=7,t.setFont("helvetica","normal"),t.setFontSize(8);const $=k=>a.symbol+Math.round(k).toLocaleString("en-GB");for(const k of F){if(r>275&&(t.addPage(),r=16),F.indexOf(k)%2===0&&(t.setFillColor(22,32,50),t.rect(j,r,B,6,"F")),t.setTextColor(148,163,184),"month"in k&&"monthInYear"in k){const w=k;t.text(`Y${w.year} M${w.monthInYear}`,l[0],r+4.5),t.text($(s?w.withdrawals:w.deposits),l[1],r+4.5),t.text($(w.interest),l[2],r+4.5),t.setTextColor(34,211,238),t.text($(w.totalValue),l[3],r+4.5)}else{const w=k;t.text(String(w.year),l[0],r+4.5),t.text($(s?w.withdrawals:w.deposits),l[1],r+4.5),t.text($(w.interest),l[2],r+4.5),t.setTextColor(34,211,238),t.text($(w.totalValue),l[3],r+4.5)}r+=6}t.setFont("helvetica","normal"),t.setFontSize(7),t.setTextColor(100,116,139),t.text("Generated by TakeHomeCalc.co.uk",R/2,t.internal.pageSize.getHeight()-8,{align:"center"}),t.save(`compound-interest-${u}.pdf`)},[i,u,s,a.symbol]),G=n.useMemo(()=>i?i.yearByYear.map(t=>{if(s){const R=Math.max(0,i.initialInvestment-t.withdrawals),j=t.totalValue-R;return{year:t.year,"Remaining Balance":Math.max(0,R),Interest:Math.max(0,j)}}return{year:t.year,"Initial Balance":i.initialInvestment,"Additional Deposits":t.deposits-i.initialInvestment,Interest:t.interest}}):[],[i,s]);return e.jsxs("div",{className:"ci-page",children:[g&&e.jsx(ie,{onClose:p,onSuccess:I}),e.jsxs("div",{className:"page-header",children:[e.jsx("h1",{className:"page-title",children:"Compound Interest Calculator"}),e.jsx("p",{className:"page-subtitle",children:"Calculate how your investments grow over time with compounding."})]}),e.jsxs("div",{className:"ci-grid",children:[e.jsxs("div",{className:"ci-left",children:[e.jsxs("div",{className:"ci-card",children:[e.jsx("h2",{className:"ci-card-title",children:"Investment Details"}),e.jsx("div",{className:"ci-mode-toggle-field",children:e.jsxs("div",{className:"ci-mode-toggle-group",children:[e.jsx("button",{className:`ci-mode-btn ${s?"":"ci-mode-btn--active ci-mode-btn--deposit"}`,onClick:()=>f("deposit"),children:"Deposit"}),e.jsx("button",{className:`ci-mode-btn ${s?"ci-mode-btn--active ci-mode-btn--withdrawal":""}`,onClick:()=>f("withdrawal"),children:"Withdrawal"})]})}),e.jsxs("div",{className:"ci-field",children:[e.jsx("label",{className:"ci-label",children:"Initial Investment"}),e.jsx(H,{value:v,onChange:N,symbol:a.symbol,ariaLabel:"Initial investment amount"})]}),e.jsxs("div",{className:"ci-field",children:[e.jsx("label",{className:"ci-label",children:s?"Recurring Withdrawal":"Recurring Deposit"}),e.jsxs("div",{className:"ci-row",children:[e.jsx(H,{value:C,onChange:b,symbol:a.symbol,ariaLabel:s?"Recurring withdrawal amount":"Recurring deposit amount"}),e.jsxs("div",{className:"ci-toggle",children:[e.jsx("button",{className:`ci-toggle-btn ${M==="monthly"?"ci-toggle-btn--active":""}`,onClick:()=>c("monthly"),children:"Monthly"}),e.jsx("button",{className:`ci-toggle-btn ${M==="annually"?"ci-toggle-btn--active":""}`,onClick:()=>c("annually"),children:"Annually"})]})]})]}),e.jsxs("div",{className:"ci-field",children:[e.jsx("label",{className:"ci-label",children:"Annual Growth Rate"}),e.jsx(q,{value:y,onChange:A,suffix:"%",ariaLabel:"Annual growth rate percentage",min:0,max:100})]}),e.jsxs("div",{className:"ci-field",children:[e.jsx("label",{className:"ci-label",children:s?"Annual Withdrawal Increase":"Annual Deposit Increase"}),e.jsx("div",{className:"ci-segment-group",children:xe.map(t=>e.jsxs("button",{className:`ci-segment-btn ${T===t?"ci-segment-btn--active":""}`,onClick:()=>L(t),"aria-label":`${t}% annual ${s?"withdrawal":"deposit"} increase`,children:[t,"%"]},t))})]}),e.jsxs("div",{className:"ci-field",children:[e.jsx("label",{className:"ci-label",children:"Investment Period"}),e.jsx(q,{value:S,onChange:W,suffix:"years",ariaLabel:"Investment period in years",min:1,max:100})]}),e.jsx("button",{className:"calculate-btn ci-calculate-btn",disabled:!O,onClick:Q,"aria-label":"Calculate compound interest",children:"Calculate"})]}),i&&e.jsxs("div",{className:"ci-detail-cards",children:[e.jsxs("div",{className:"ci-detail-card",children:[e.jsx("div",{className:"ci-detail-icon",children:"ðŸ“ˆ"}),e.jsx("div",{className:"ci-detail-label",children:"Future Value"}),e.jsx(D,{value:o(i.futureValue,a.code),className:"ci-detail-value--green"})]}),e.jsxs("div",{className:"ci-detail-card",children:[e.jsx("div",{className:"ci-detail-icon",children:"ðŸ’°"}),e.jsx("div",{className:"ci-detail-label",children:"Total Interest"}),e.jsx(D,{value:o(i.totalInterest,a.code),className:"ci-detail-value--yellow"})]}),s?e.jsxs("div",{className:"ci-detail-card",children:[e.jsx("div",{className:"ci-detail-icon",children:"ðŸ“¤"}),e.jsx("div",{className:"ci-detail-label",children:"Total Withdrawn"}),e.jsx(D,{value:o(i.totalWithdrawals,a.code),className:"ci-detail-value--red"})]}):e.jsxs("div",{className:"ci-detail-card",children:[e.jsx("div",{className:"ci-detail-icon",children:"ðŸ’¼"}),e.jsx("div",{className:"ci-detail-label",children:"Total Deposits"}),e.jsx(D,{value:o(i.totalDeposits,a.code),className:"ci-detail-value--purple"})]})]})]}),e.jsxs("div",{className:"ci-right",children:[i&&e.jsxs("div",{className:"ci-card ci-results-card",children:[e.jsx("h2",{className:"ci-card-title",children:"Results"}),e.jsxs("div",{className:"ci-results-grid",children:[e.jsxs("div",{className:"ci-result-item",children:[e.jsx("span",{className:"ci-result-label",children:"Future Value"}),e.jsx(D,{value:o(i.futureValue,a.code),className:"ci-result-value--green"})]}),e.jsxs("div",{className:"ci-result-item",children:[e.jsx("span",{className:"ci-result-label",children:"Total Interest Earned"}),e.jsx(D,{value:o(i.totalInterest,a.code),className:"ci-result-value--yellow"})]}),e.jsxs("div",{className:"ci-result-item",children:[e.jsx("span",{className:"ci-result-label",children:"Initial Balance"}),e.jsx(D,{value:o(v,a.code),className:"ci-result-value--blue"})]}),s?e.jsxs("div",{className:"ci-result-item",children:[e.jsx("span",{className:"ci-result-label",children:"Total Withdrawn"}),e.jsx(D,{value:o(i.totalWithdrawals,a.code),className:"ci-result-value--red"})]}):e.jsxs("div",{className:"ci-result-item",children:[e.jsx("span",{className:"ci-result-label",children:"Additional Deposits"}),e.jsx(D,{value:o(i.totalDeposits-i.initialInvestment,a.code),className:"ci-result-value--purple"})]})]})]}),i&&G.length>0&&e.jsxs("div",{className:"ci-card ci-chart-card",children:[e.jsx("h2",{className:"ci-card-title",children:s?"Portfolio Drawdown":"Portfolio Growth"}),e.jsx("div",{className:"ci-chart-container",children:e.jsx(ne,{width:"100%",height:320,children:e.jsxs(de,{data:G,margin:{top:10,right:10,left:10,bottom:0},children:[e.jsx(le,{strokeDasharray:"3 3",stroke:"var(--border-color)",vertical:!1}),e.jsx(ce,{dataKey:"year",tick:{fill:"var(--text-muted)",fontSize:11},axisLine:{stroke:"var(--border-color)"},tickLine:!1,tickFormatter:t=>G.length>20&&t%5!==0?"":`${t}`}),e.jsx(re,{tick:{fill:"var(--text-muted)",fontSize:11},axisLine:!1,tickLine:!1,tickFormatter:t=>t>=1e6?`${(t/1e6).toFixed(1)}M`:t>=1e3?`${(t/1e3).toFixed(0)}K`:String(t)}),e.jsx(oe,{content:e.jsx(je,{currencyCode:a.code}),cursor:{fill:"rgba(255,255,255,0.03)"}}),e.jsx(ue,{wrapperStyle:{fontSize:12,color:"var(--text-secondary)"}}),s?e.jsxs(e.Fragment,{children:[e.jsx(Y,{dataKey:"Remaining Balance",stackId:"portfolio",fill:K,radius:[0,0,0,0],animationDuration:800}),e.jsx(Y,{dataKey:"Interest",stackId:"portfolio",fill:_,radius:[4,4,0,0],animationDuration:800})]}):e.jsxs(e.Fragment,{children:[e.jsx(Y,{dataKey:"Initial Balance",stackId:"portfolio",fill:K,radius:[0,0,0,0],animationDuration:800}),e.jsx(Y,{dataKey:"Additional Deposits",stackId:"portfolio",fill:me,radius:[0,0,0,0],animationDuration:800}),e.jsx(Y,{dataKey:"Interest",stackId:"portfolio",fill:_,radius:[4,4,0,0],animationDuration:800})]})]})})})]})]})]}),i&&e.jsxs("div",{className:"ci-card ci-table-card ci-table-card--full",children:[e.jsxs("div",{className:"ci-table-header",children:[e.jsxs("button",{className:"ci-table-toggle",onClick:()=>E(t=>!t),"aria-expanded":x,"aria-label":"Toggle breakdown table",children:[e.jsx("span",{children:"Breakdown Table"}),e.jsx("span",{className:`ci-table-arrow ${x?"ci-table-arrow--open":""}`,children:"â–¼"})]}),x&&e.jsxs("div",{className:"ci-table-controls",children:[e.jsxs("div",{className:"ci-table-view-toggle",children:[e.jsx("button",{className:`ci-toggle-btn ${u==="annual"?"ci-toggle-btn--active":""}`,onClick:()=>P("annual"),children:"Annual"}),e.jsx("button",{className:`ci-toggle-btn ${u==="monthly"?"ci-toggle-btn--active":""}`,onClick:()=>P("monthly"),children:"Monthly"})]}),e.jsxs("div",{className:"ci-export-group",children:[e.jsxs("button",{className:"ci-export-btn",onClick:()=>d(()=>Z()),children:[e.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),e.jsx("polyline",{points:"7 10 12 15 17 10"}),e.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),"CSV"]}),e.jsxs("button",{className:"ci-export-btn",onClick:()=>d(()=>ee()),children:[e.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),e.jsx("polyline",{points:"7 10 12 15 17 10"}),e.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),"PDF"]})]})]})]}),e.jsx("div",{className:`ci-table-body ${x?"ci-table-body--open":""}`,children:e.jsx("div",{className:"ci-table-scroll",children:e.jsxs("table",{className:"ci-table","aria-label":"Compound interest breakdown",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"ci-th ci-th--left",children:u==="annual"?"Year":"Month"}),e.jsx("th",{className:"ci-th ci-th--right",children:s?"Withdrawn":"Deposits"}),e.jsx("th",{className:"ci-th ci-th--right",children:"Interest"}),e.jsx("th",{className:"ci-th ci-th--right",children:"Total Value"})]})}),e.jsx("tbody",{children:u==="annual"?i.yearByYear.map(t=>e.jsxs("tr",{className:"ci-tr",children:[e.jsx("td",{className:"ci-td ci-td--left",children:t.year}),e.jsx("td",{className:"ci-td ci-td--right",children:s?o(t.withdrawals,a.code):o(t.deposits,a.code)}),e.jsx("td",{className:"ci-td ci-td--right ci-td--interest",children:o(t.interest,a.code)}),e.jsx("td",{className:"ci-td ci-td--right ci-td--total",children:o(t.totalValue,a.code)})]},t.year)):i.monthByMonth.map(t=>e.jsxs("tr",{className:"ci-tr",children:[e.jsxs("td",{className:"ci-td ci-td--left",children:["Y",t.year," M",t.monthInYear]}),e.jsx("td",{className:"ci-td ci-td--right",children:s?o(t.withdrawals,a.code):o(t.deposits,a.code)}),e.jsx("td",{className:"ci-td ci-td--right ci-td--interest",children:o(t.interest,a.code)}),e.jsx("td",{className:"ci-td ci-td--right ci-td--total",children:o(t.totalValue,a.code)})]},t.month))})]})})})]})]})}export{be as CompoundInterestPage};
