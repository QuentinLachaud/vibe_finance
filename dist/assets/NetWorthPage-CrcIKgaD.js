import{r as l,u as Ne,b as Ve,c as ze,l as He,s as Ue,j as s,f as _}from"./index-yKex2MYx.js";import{c as I,p as Z,a as Ye,i as Xe,s as V,b as Ze,d as Je,e as Ce,f as qe,g as Qe,h as F,j as et,k as tt,l as at,m as nt,n as Se,o as st,q as rt,r as ot,t as lt,u as Ee,v as it,w as ct,x as dt,y as Oe,z as ut,A as le,D as ke,B as Ie,E as mt,S as pt,F as De,G as Y,H as ft,I as ie,L as H,Z as Te,J as ce,K as vt,M as ht,N as yt,O as gt,P as pe,Q as fe,U as J,V as bt,W as xt,_ as jt,$ as wt,a0 as At,a1 as Pt,a2 as Nt,a3 as Ct,a4 as St,a5 as Et,a6 as Ot,a7 as kt,a8 as It,a9 as X,aa as ne,ab as ve,ac as Dt,ad as Tt,ae as Rt,af as Lt,ag as Mt,ah as _t,ai as Kt,aj as $t,ak as Ft,al as Wt,am as Bt,R as de,C as Gt,X as Re,Y as Le,T as Me,an as se}from"./CartesianChart-j-4oSbR5.js";import{A as _e,a as Ke}from"./AreaChart-D6E_dPEO.js";var $e=e=>e.graphicalItems.polarItems,Vt=I([Z,Ye],Xe),Q=I([$e,V,Vt],Ze),zt=I([Q],Je),ee=I([zt,Ce],qe),Ht=I([ee,V,Q],Qe);I([ee,V,Q],(e,t,a)=>a.length>0?e.flatMap(n=>a.flatMap(r=>{var o,c=F(n,(o=t.dataKey)!==null&&o!==void 0?o:r.dataKey);return{value:c,errorDomain:[]}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:F(n,t.dataKey),errorDomain:[]})):e.map(n=>({value:n,errorDomain:[]})));var he=()=>{},Ut=I([ee,V,Q,et,Z],tt),Yt=I([V,at,nt,he,Ut,he,Se,Z],st),Fe=I([V,Se,ee,Ht,rt,Z,Yt],ot),Xt=I([Fe,lt,Ee],it),Zt=I([V,Fe,Xt,Z],ct);I([Ee,Zt],dt);function ye(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,n)}return a}function ge(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?ye(Object(a),!0).forEach(function(n){Jt(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ye(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function Jt(e,t,a){return(t=qt(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function qt(e){var t=Qt(e,"string");return typeof t=="symbol"?t:t+""}function Qt(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ea=(e,t)=>t,ue=I([$e,ea],(e,t)=>e.filter(a=>a.type==="pie").find(a=>a.id===t)),ta=[],me=(e,t,a)=>(a==null?void 0:a.length)===0?ta:a,We=I([Ce,ue,me],(e,t,a)=>{var{chartData:n}=e;if(t!=null){var r;if((t==null?void 0:t.data)!=null&&t.data.length>0?r=t.data:r=n,(!r||!r.length)&&a!=null&&(r=a.map(o=>ge(ge({},t.presentationProps),o.props))),r!=null)return r}}),aa=I([We,ue,me],(e,t,a)=>{if(!(e==null||t==null))return e.map((n,r)=>{var o,c=F(n,t.nameKey,t.name),d;return a!=null&&(o=a[r])!==null&&o!==void 0&&(o=o.props)!==null&&o!==void 0&&o.fill?d=a[r].props.fill:typeof n=="object"&&n!=null&&"fill"in n?d=n.fill:d=t.fill,{value:Oe(c,t.dataKey),color:d,payload:n,type:t.legendType}})}),na=I([We,ue,me,ut],(e,t,a,n)=>{if(!(t==null||e==null))return Aa({offset:n,pieSettings:t,displayedData:e,cells:a})}),sa=["key"],ra=["onMouseEnter","onClick","onMouseLeave"],oa=["id"],la=["id"];function be(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,n)}return a}function P(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?be(Object(a),!0).forEach(function(n){ia(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):be(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function ia(e,t,a){return(t=ca(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function ca(e){var t=da(e,"string");return typeof t=="symbol"?t:t+""}function da(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function B(){return B=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)({}).hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},B.apply(null,arguments)}function te(e,t){if(e==null)return{};var a,n,r=ua(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function ua(e,t){if(e==null)return{};var a={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;a[n]=e[n]}return a}function ma(e){var t=l.useMemo(()=>De(e.children,ce),[e.children]),a=Y(n=>aa(n,e.id,t));return a==null?null:l.createElement(ft,{legendPayload:a})}var pa=l.memo(e=>{var{dataKey:t,nameKey:a,sectors:n,stroke:r,strokeWidth:o,fill:c,name:d,hide:i,tooltipType:m,id:b}=e,j={dataDefinedOnItem:n.map(f=>f.tooltipPayload),getPosition:f=>{var w;return(w=n[Number(f)])===null||w===void 0?void 0:w.tooltipPosition},settings:{stroke:r,strokeWidth:o,fill:c,dataKey:t,nameKey:a,name:Oe(d,t),hide:i,type:m,color:c,unit:"",graphicalItemId:b}};return l.createElement(vt,{tooltipEntrySettings:j})}),fa=(e,t)=>e>t?"start":e<t?"end":"middle",va=(e,t,a)=>typeof t=="function"?X(t(e),a,a*.8):X(t,a,a*.8),ha=(e,t,a)=>{var{top:n,left:r,width:o,height:c}=t,d=It(o,c),i=r+X(e.cx,o,o/2),m=n+X(e.cy,c,c/2),b=X(e.innerRadius,d,0),j=va(a,e.outerRadius,d),f=e.maxRadius||Math.sqrt(o*o+c*c)/2;return{cx:i,cy:m,innerRadius:b,outerRadius:j,maxRadius:f}},ya=(e,t)=>{var a=J(t-e),n=Math.min(Math.abs(t-e),360);return a*n},ga=(e,t)=>{if(l.isValidElement(e))return l.cloneElement(e,t);if(typeof e=="function")return e(t);var a=ie("recharts-pie-label-line",typeof e!="boolean"?e.className:""),{key:n}=t,r=te(t,sa);return l.createElement(Dt,B({},r,{type:"linear",className:a}))},ba=(e,t,a)=>{if(l.isValidElement(e))return l.cloneElement(e,t);var n=a;if(typeof e=="function"&&(n=e(t),l.isValidElement(n)))return n;var r=ie("recharts-pie-label-text",Tt(e));return l.createElement(Rt,B({},t,{alignmentBaseline:"middle",className:r}),n)};function xa(e){var{sectors:t,props:a,showLabels:n}=e,{label:r,labelLine:o,dataKey:c}=a;if(!n||!r||!t)return null;var d=Ie(a),i=ve(r),m=ve(o),b=typeof r=="object"&&"offsetRadius"in r&&typeof r.offsetRadius=="number"&&r.offsetRadius||20,j=t.map((f,w)=>{var O=(f.startAngle+f.endAngle)/2,h=ne(f.cx,f.cy,f.outerRadius+b,O),p=P(P(P(P({},d),f),{},{stroke:"none"},i),{},{index:w,textAnchor:fa(h.x,f.cx)},h),g=P(P(P(P({},d),f),{},{fill:"none",stroke:f.fill},m),{},{index:w,points:[ne(f.cx,f.cy,f.outerRadius,O),h],key:"line"});return l.createElement(Te,{zIndex:ke.label,key:"label-".concat(f.startAngle,"-").concat(f.endAngle,"-").concat(f.midAngle,"-").concat(w)},l.createElement(H,null,o&&ga(o,g),ba(r,p,F(f,c))))});return l.createElement(H,{className:"recharts-pie-labels"},j)}function ja(e){var{sectors:t,props:a,showLabels:n}=e,{label:r}=a;return typeof r=="object"&&r!=null&&"position"in r?l.createElement(kt,{label:r}):l.createElement(xa,{sectors:t,props:a,showLabels:n})}function wa(e){var{sectors:t,activeShape:a,inactiveShape:n,allOtherPieProps:r,shape:o,id:c}=e,d=Y(xt),i=Y(jt),m=Y(wt),{onMouseEnter:b,onClick:j,onMouseLeave:f}=r,w=te(r,ra),O=At(b,r.dataKey,c),h=Pt(f),p=Nt(j,r.dataKey,c);return t==null||t.length===0?null:l.createElement(l.Fragment,null,t.map((g,v)=>{if((g==null?void 0:g.startAngle)===0&&(g==null?void 0:g.endAngle)===0&&t.length!==1)return null;var k=m==null||m===c,N=String(v)===d&&(i==null||r.dataKey===i)&&k,D=d?n:null,C=a&&N?a:D,S=P(P({},g),{},{stroke:g.stroke,tabIndex:-1,[St]:v,[Ct]:c});return l.createElement(H,B({key:"sector-".concat(g==null?void 0:g.startAngle,"-").concat(g==null?void 0:g.endAngle,"-").concat(g.midAngle,"-").concat(v),tabIndex:-1,className:"recharts-pie-sector"},Et(w,g,v),{onMouseEnter:O(g,v),onMouseLeave:h(g,v),onClick:p(g,v)}),l.createElement(Ot,B({option:o??C,index:v,shapeType:"sector",isActive:N},S)))}))}function Aa(e){var t,{pieSettings:a,displayedData:n,cells:r,offset:o}=e,{cornerRadius:c,startAngle:d,endAngle:i,dataKey:m,nameKey:b,tooltipType:j}=a,f=Math.abs(a.minAngle),w=ya(d,i),O=Math.abs(w),h=n.length<=1?0:(t=a.paddingAngle)!==null&&t!==void 0?t:0,p=n.filter(C=>F(C,m,0)!==0).length,g=(O>=360?p:p-1)*h,v=O-p*f-g,k=n.reduce((C,S)=>{var E=F(S,m,0);return C+(fe(E)?E:0)},0),N;if(k>0){var D;N=n.map((C,S)=>{var E=F(C,m,0),K=F(C,b,S),T=ha(a,o,C),L=(fe(E)?E:0)/k,M,u=P(P({},C),r&&r[S]&&r[S].props);S?M=D.endAngle+J(w)*h*(E!==0?1:0):M=d;var y=M+J(w)*((E!==0?f:0)+L*v),A=(M+y)/2,x=(T.innerRadius+T.outerRadius)/2,R=[{name:K,value:E,payload:u,dataKey:m,type:j,graphicalItemId:a.id}],$=ne(T.cx,T.cy,x,A);return D=P(P(P(P({},a.presentationProps),{},{percent:L,cornerRadius:typeof c=="string"?parseFloat(c):c,name:K,tooltipPayload:R,midAngle:A,middleRadius:x,tooltipPosition:$},u),T),{},{value:E,dataKey:m,startAngle:M,endAngle:y,payload:u,paddingAngle:J(w)*h}),D})}return N}function Pa(e){var{showLabels:t,sectors:a,children:n}=e,r=l.useMemo(()=>!t||!a?[]:a.map(o=>({value:o.value,payload:o.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:o.cx,cy:o.cy,innerRadius:o.innerRadius,outerRadius:o.outerRadius,startAngle:o.startAngle,endAngle:o.endAngle,clockWise:!1},fill:o.fill})),[a,t]);return l.createElement(bt,{value:t?r:void 0},n)}function Na(e){var{props:t,previousSectorsRef:a,id:n}=e,{sectors:r,isAnimationActive:o,animationBegin:c,animationDuration:d,animationEasing:i,activeShape:m,inactiveShape:b,onAnimationStart:j,onAnimationEnd:f}=t,w=ht(t,"recharts-pie-"),O=a.current,[h,p]=l.useState(!1),g=l.useCallback(()=>{typeof f=="function"&&f(),p(!1)},[f]),v=l.useCallback(()=>{typeof j=="function"&&j(),p(!0)},[j]);return l.createElement(Pa,{showLabels:!h,sectors:r},l.createElement(yt,{animationId:w,begin:c,duration:d,isActive:o,easing:i,onAnimationStart:v,onAnimationEnd:g,key:w},k=>{var N,D=[],C=r&&r[0],S=(N=C==null?void 0:C.startAngle)!==null&&N!==void 0?N:0;return r==null||r.forEach((E,K)=>{var T=O&&O[K],L=K>0?gt(E,"paddingAngle",0):0;if(T){var M=pe(T.endAngle-T.startAngle,E.endAngle-E.startAngle,k),u=P(P({},E),{},{startAngle:S+L,endAngle:S+M+L});D.push(u),S=u.endAngle}else{var{endAngle:y,startAngle:A}=E,x=pe(0,y-A,k),R=P(P({},E),{},{startAngle:S+L,endAngle:S+x+L});D.push(R),S=R.endAngle}}),a.current=D,l.createElement(H,null,l.createElement(wa,{sectors:D,activeShape:m,inactiveShape:b,allOtherPieProps:t,shape:t.shape,id:n}))}),l.createElement(ja,{showLabels:!h,sectors:r,props:t}),t.children)}var Ca={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:ke.area};function Sa(e){var{id:t}=e,a=te(e,oa),{hide:n,className:r,rootTabIndex:o}=e,c=l.useMemo(()=>De(e.children,ce),[e.children]),d=Y(b=>na(b,t,c)),i=l.useRef(null),m=ie("recharts-pie",r);return n||d==null?(i.current=null,l.createElement(H,{tabIndex:o,className:m})):l.createElement(Te,{zIndex:e.zIndex},l.createElement(pa,{dataKey:e.dataKey,nameKey:e.nameKey,sectors:d,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,tooltipType:e.tooltipType,id:t}),l.createElement(H,{tabIndex:o,className:m},l.createElement(Na,{props:P(P({},a),{},{sectors:d}),previousSectorsRef:i,id:t})))}function Be(e){var t=le(e,Ca),{id:a}=t,n=te(t,la),r=Ie(n);return l.createElement(mt,{id:a,type:"pie"},o=>l.createElement(l.Fragment,null,l.createElement(pt,{type:"pie",id:o,data:n.data,dataKey:n.dataKey,hide:n.hide,angleAxisId:0,radiusAxisId:0,name:n.name,nameKey:n.nameKey,tooltipType:n.tooltipType,legendType:n.legendType,fill:n.fill,cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,paddingAngle:n.paddingAngle,minAngle:n.minAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius,cornerRadius:n.cornerRadius,presentationProps:r,maxRadius:t.maxRadius}),l.createElement(ma,B({},n,{id:o})),l.createElement(Sa,B({},n,{id:o}))))}Be.displayName="Pie";function Ea(e){var t=Lt();return l.useEffect(()=>{t(Mt(e))},[t,e]),null}var Oa=["layout"];function re(){return re=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)({}).hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},re.apply(null,arguments)}function ka(e,t){if(e==null)return{};var a,n,r=Ia(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function Ia(e,t){if(e==null)return{};var a={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;a[n]=e[n]}return a}var Da={top:5,right:5,bottom:5,left:5},Ge={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:Da,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},Ta=l.forwardRef(function(t,a){var n,r=le(t.categoricalChartProps,Ge),{layout:o}=r,c=ka(r,Oa),{chartName:d,defaultTooltipEventType:i,validateTooltipEventTypes:m,tooltipPayloadSearcher:b}=t,j={chartName:d,defaultTooltipEventType:i,validateTooltipEventTypes:m,tooltipPayloadSearcher:b,eventEmitter:void 0};return l.createElement(_t,{preloadedState:{options:j},reduxStoreName:(n=r.id)!==null&&n!==void 0?n:d},l.createElement(Kt,{chartData:r.data}),l.createElement($t,{layout:o,margin:r.margin}),l.createElement(Ft,{baseValue:void 0,accessibilityLayer:r.accessibilityLayer,barCategoryGap:r.barCategoryGap,maxBarSize:r.maxBarSize,stackOffset:r.stackOffset,barGap:r.barGap,barSize:r.barSize,syncId:r.syncId,syncMethod:r.syncMethod,className:r.className,reverseStackOrder:r.reverseStackOrder}),l.createElement(Ea,{cx:r.cx,cy:r.cy,startAngle:r.startAngle,endAngle:r.endAngle,innerRadius:r.innerRadius,outerRadius:r.outerRadius}),l.createElement(Wt,re({},c,{ref:a})))});function xe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,n)}return a}function je(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?xe(Object(a),!0).forEach(function(n){Ra(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):xe(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function Ra(e,t,a){return(t=La(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function La(e){var t=Ma(e,"string");return typeof t=="symbol"?t:t+""}function Ma(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _a=["item"],Ka=je(je({},Ge),{},{layout:"centric",startAngle:0,endAngle:360}),$a=l.forwardRef((e,t)=>{var a=le(e,Ka);return l.createElement(Ta,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:_a,tooltipPayloadSearcher:Bt,categoricalChartProps:a,ref:t})});const Fa=["ðŸ ","ðŸš—","ðŸ’°","ðŸ“ˆ","ðŸ¦","ðŸ’Ž","ðŸª™","ðŸ¢","ðŸ’¼","ðŸŽ¨","âŒš","ðŸï¸","ðŸ”‘","ðŸ“±","ðŸ–¥ï¸","ðŸŽµ"],oe=["Property","Cash & Savings","Investments","Pension","Vehicle","Crypto","Collectibles","Business"],G=["#22d3ee","#8b5cf6","#10b981","#f59e0b","#3b82f6","#ec4899","#ef4444","#06b6d4","#a855f7","#14b8a6","#f97316","#6366f1"],we=[{id:"example-1",emoji:"ðŸ ",name:"Primary Residence",type:"Property",snapshots:[{date:"2023-01-15",value:28e4},{date:"2023-07-01",value:29e4},{date:"2024-01-15",value:305e3},{date:"2024-07-01",value:315e3},{date:"2025-01-15",value:33e4}],createdAt:"",updatedAt:""},{id:"example-2",emoji:"ðŸ“ˆ",name:"ISA Portfolio",type:"Investments",snapshots:[{date:"2023-01-15",value:18e3},{date:"2023-07-01",value:22e3},{date:"2024-01-15",value:28e3},{date:"2024-07-01",value:34e3},{date:"2025-01-15",value:41e3}],createdAt:"",updatedAt:""},{id:"example-3",emoji:"ðŸ’°",name:"Emergency Fund",type:"Cash & Savings",snapshots:[{date:"2023-01-15",value:5e3},{date:"2023-07-01",value:7500},{date:"2024-01-15",value:1e4},{date:"2024-07-01",value:1e4},{date:"2025-01-15",value:12e3}],createdAt:"",updatedAt:""},{id:"example-4",emoji:"ðŸ¦",name:"Workplace Pension",type:"Pension",snapshots:[{date:"2023-01-15",value:14e3},{date:"2023-07-01",value:18e3},{date:"2024-01-15",value:23e3},{date:"2024-07-01",value:27e3},{date:"2025-01-15",value:32e3}],createdAt:"",updatedAt:""}],Wa={Property:"#22d3ee","Cash & Savings":"#10b981",Investments:"#8b5cf6",Pension:"#f59e0b",Vehicle:"#3b82f6",Crypto:"#ec4899",Collectibles:"#ef4444",Business:"#06b6d4"};function Ba(e,t){return Wa[e]||G[t%G.length]}function Ga(){return Math.random().toString(36).substring(2,10)+Date.now().toString(36)}function q(){return new Date().toISOString()}function Va(){const e=new Date;return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`}function ae(e){return new Date(e+"T00:00:00").toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})}function W(e){if(!e.snapshots.length)return 0;const t=[...e.snapshots].sort((a,n)=>a.date.localeCompare(n.date));return t[t.length-1].value}const za={version:1,assets:[],customTypes:[],lastModified:q()};function Ha({value:e,onChange:t}){const[a,n]=l.useState(!1),r=l.useRef(null);return l.useEffect(()=>{const o=c=>{r.current&&!r.current.contains(c.target)&&n(!1)};return a&&document.addEventListener("mousedown",o),()=>document.removeEventListener("mousedown",o)},[a]),s.jsxs("div",{className:"nw-emoji-picker",ref:r,children:[s.jsx("button",{className:"nw-emoji-btn",onClick:()=>n(!a),type:"button",title:"Choose icon",children:e}),a&&s.jsx("div",{className:"nw-emoji-dropdown",children:Fa.map(o=>s.jsx("button",{className:`nw-emoji-option ${o===e?"nw-emoji-option--active":""}`,onClick:()=>{t(o),n(!1)},type:"button",children:o},o))})]})}function Ua({value:e,onChange:t,customTypes:a}){const[n,r]=l.useState(""),[o,c]=l.useState(!1),d=l.useMemo(()=>{const i=new Set([...a,...oe]);return Array.from(i)},[a]);return s.jsx("div",{className:"nw-type-selector",children:o?s.jsxs("div",{className:"nw-custom-type-row",children:[s.jsx("input",{className:"nw-input",value:n,onChange:i=>r(i.target.value),placeholder:"Enter custom typeâ€¦",autoFocus:!0,onKeyDown:i=>{i.key==="Enter"&&n.trim()?(t(n.trim()),c(!1),r("")):i.key==="Escape"&&c(!1)}}),s.jsx("button",{className:"nw-btn-sm",onClick:()=>{n.trim()&&(t(n.trim()),c(!1),r(""))},type:"button",children:"Add"}),s.jsx("button",{className:"nw-btn-sm nw-btn-sm--muted",onClick:()=>c(!1),type:"button",children:"Cancel"})]}):s.jsx(s.Fragment,{children:s.jsxs("select",{className:"nw-select",value:e,onChange:i=>{i.target.value==="__custom__"?c(!0):t(i.target.value)},children:[s.jsx("option",{value:"__custom__",children:"+ Custom Type"}),d.map(i=>s.jsx("option",{value:i,children:i},i))]})})})}function Ae({initial:e,customTypes:t,onSave:a,onCancel:n,onNewCustomType:r}){const[o,c]=l.useState((e==null?void 0:e.emoji)||"ðŸ’°"),[d,i]=l.useState((e==null?void 0:e.name)||""),[m,b]=l.useState((e==null?void 0:e.type)||oe[0]),[j,f]=l.useState(e?String(W(e)):""),[w,O]=l.useState(e!=null&&e.snapshots.length?[...e.snapshots].sort((v,k)=>k.date.localeCompare(v.date))[0].date:Va()),{currency:h}=Ne(),p=l.useCallback(v=>{b(v),oe.includes(v)||r(v)},[r]),g=()=>{if(!d.trim())return;const v=Number(j.replace(/,/g,""));if(isNaN(v))return;const k=e?e.snapshots.filter(C=>C.date!==w):[],N=q(),D={id:(e==null?void 0:e.id)||Ga(),emoji:o,name:d.trim(),type:m,snapshots:[...k,{date:w,value:v}].sort((C,S)=>C.date.localeCompare(S.date)),createdAt:(e==null?void 0:e.createdAt)||N,updatedAt:N};a(D)};return s.jsxs("div",{className:"nw-form",children:[s.jsxs("div",{className:"nw-form-row",children:[s.jsx(Ha,{value:o,onChange:c}),s.jsx("input",{className:"nw-input nw-input--name",value:d,onChange:v=>i(v.target.value),placeholder:"Asset name",autoFocus:!0})]}),s.jsxs("div",{className:"nw-form-row",children:[s.jsx("label",{className:"nw-form-label",children:"Type"}),s.jsx(Ua,{value:m,onChange:p,customTypes:t})]}),s.jsxs("div",{className:"nw-form-row",children:[s.jsx("label",{className:"nw-form-label",children:"Value"}),s.jsxs("div",{className:"nw-value-row",children:[s.jsx("span",{className:"nw-currency-prefix",children:h.symbol}),s.jsx("input",{className:"nw-input nw-input--value",value:j,onChange:v=>f(v.target.value),placeholder:"0",inputMode:"numeric"}),s.jsx("span",{className:"nw-form-label",style:{marginLeft:12},children:"as of"}),s.jsx("input",{className:"nw-input nw-input--date",type:"date",value:w,onChange:v=>O(v.target.value)})]})]}),s.jsxs("div",{className:"nw-form-actions",children:[s.jsx("button",{className:"ps-btn ps-btn--primary",onClick:g,type:"button",children:e?"Save Changes":"Add Asset"}),s.jsx("button",{className:"ps-btn ps-btn--secondary",onClick:n,type:"button",children:"Cancel"})]})]})}function Ya({asset:e,currencyCode:t,onDelete:a,onClose:n}){const[r,o]=l.useState(null),c=l.useRef(null);l.useEffect(()=>{const i=m=>{c.current&&!c.current.contains(m.target)&&n()};return document.addEventListener("mousedown",i),()=>document.removeEventListener("mousedown",i)},[n]);const d=[...e.snapshots].sort((i,m)=>m.date.localeCompare(i.date));return s.jsx("div",{className:"nw-history-overlay",children:s.jsxs("div",{className:"nw-history-popup",ref:c,children:[s.jsxs("div",{className:"nw-history-header",children:[s.jsxs("span",{className:"nw-history-title",children:[e.emoji," ",e.name," â€” History"]}),s.jsx("button",{className:"nw-history-close",onClick:n,children:"Ã—"})]}),s.jsxs("div",{className:"nw-history-list",children:[d.length===0&&s.jsx("div",{className:"nw-history-empty",children:"No entries yet."}),d.map(i=>s.jsxs("div",{className:"nw-history-row",children:[s.jsx("span",{className:"nw-history-date",children:ae(i.date)}),s.jsx("span",{className:`nw-history-value${i.value<0?" nw-history-value--neg":""}`,children:_(i.value,t)}),r===i.date?s.jsxs("div",{className:"nw-history-confirm",children:[s.jsx("span",{className:"nw-history-confirm-text",children:"Permanent. Delete?"}),s.jsx("button",{className:"nw-history-confirm-yes",onClick:m=>{m.stopPropagation(),a(e.id,i.date),o(null)},children:"Yes"}),s.jsx("button",{className:"nw-history-confirm-no",onClick:m=>{m.stopPropagation(),o(null)},children:"No"})]}):s.jsx("button",{className:"nw-history-del",onClick:m=>{m.stopPropagation(),o(i.date)},title:"Remove entry",children:"Ã—"})]},i.date))]})]})})}function Xa({asset:e,color:t,currencyCode:a,onEdit:n,onDelete:r,onShowHistory:o}){const c=W(e),d=e.snapshots.length?[...e.snapshots].sort((i,m)=>m.date.localeCompare(i.date))[0].date:"";return s.jsxs("div",{className:"nw-asset-card",children:[s.jsxs("div",{className:"nw-asset-left",children:[s.jsx("span",{className:"nw-asset-emoji",style:{background:`${t}18`},children:e.emoji}),s.jsxs("div",{className:"nw-asset-info",children:[s.jsx("span",{className:"nw-asset-name",children:e.name}),s.jsx("span",{className:"nw-asset-type",children:e.type})]})]}),s.jsxs("div",{className:"nw-asset-right",children:[s.jsxs("div",{className:"nw-asset-value-col",children:[s.jsx("span",{className:`nw-asset-value${c<0?" nw-asset-value--neg":""}`,children:_(c,a)}),d&&s.jsxs("span",{className:"nw-asset-date",children:["as of ",ae(d)]})]}),s.jsxs("div",{className:"nw-asset-actions",children:[s.jsx("button",{className:"nw-action-btn",onClick:i=>{i.stopPropagation(),o()},title:"Show history",children:"History"}),s.jsx("button",{className:"nw-action-btn",onClick:i=>{i.stopPropagation(),n()},title:"Update",children:"Update"}),s.jsx("button",{className:"nw-action-btn nw-action-btn--del",onClick:i=>{i.stopPropagation(),r()},title:"Remove",children:"Ã—"})]})]})]})}function Za({asset:e,currencyCode:t,color:a}){if(e.snapshots.length<2)return null;const n=[...e.snapshots].sort((r,o)=>r.date.localeCompare(o.date)).map(r=>({date:ae(r.date),value:r.value}));return s.jsx("div",{className:"nw-asset-chart",children:s.jsx(de,{width:"100%",height:120,children:s.jsxs(_e,{data:n,margin:{top:4,right:8,left:8,bottom:0},children:[s.jsx("defs",{children:s.jsxs("linearGradient",{id:`grad-${e.id}`,x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"0%",stopColor:a,stopOpacity:.3}),s.jsx("stop",{offset:"100%",stopColor:a,stopOpacity:.03})]})}),s.jsx(Re,{dataKey:"date",tick:{fill:"var(--text-muted)",fontSize:9},tickLine:!1,axisLine:!1}),s.jsx(Le,{hide:!0,domain:["dataMin","dataMax"]}),s.jsx(Me,{contentStyle:{background:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:8,fontSize:12},formatter:r=>r!=null?_(r,t):"",labelStyle:{color:"var(--text-muted)"}}),s.jsx(Ke,{type:"monotone",dataKey:"value",stroke:a,strokeWidth:2,fill:`url(#grad-${e.id})`,dot:{fill:a,r:3}})]})})})}function Pe({assets:e,currencyCode:t}){const a=new Set;for(const o of e)for(const c of o.snapshots)a.add(c.date);const n=Array.from(a).sort();if(n.length<2)return null;const r=n.map(o=>{let c=0;for(const d of e){const i=[...d.snapshots].sort((b,j)=>b.date.localeCompare(j.date));let m=0;for(const b of i)b.date<=o&&(m=b.value);c+=m}return{date:ae(o),total:c}});return s.jsx("div",{className:"nw-net-chart-wrap",children:s.jsx(de,{width:"100%",height:260,children:s.jsxs(_e,{data:r,margin:{top:10,right:10,left:10,bottom:0},children:[s.jsx("defs",{children:s.jsxs("linearGradient",{id:"nwGrad",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"0%",stopColor:"#22d3ee",stopOpacity:.3}),s.jsx("stop",{offset:"100%",stopColor:"#22d3ee",stopOpacity:.02})]})}),s.jsx(Gt,{strokeDasharray:"3 3",stroke:"var(--border-color)",vertical:!1}),s.jsx(Re,{dataKey:"date",tick:{fill:"var(--text-muted)",fontSize:10},tickLine:!1,axisLine:{stroke:"var(--border-color)"}}),s.jsx(Le,{tick:{fill:"var(--text-muted)",fontSize:11},axisLine:!1,tickLine:!1,tickFormatter:o=>o>=1e6?`${(o/1e6).toFixed(1)}M`:o>=1e3?`${(o/1e3).toFixed(0)}K`:String(o)}),s.jsx(Me,{contentStyle:{background:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:8,fontSize:12},formatter:o=>o!=null?_(o,t):"",labelStyle:{color:"var(--text-muted)"}}),s.jsx(Ke,{type:"monotone",dataKey:"total",stroke:"#22d3ee",strokeWidth:2.5,fill:"url(#nwGrad)",name:"Net Worth",dot:{fill:"#22d3ee",r:3}})]})})})}function Ja(e){const{cx:t,cy:a,innerRadius:n,outerRadius:r,startAngle:o,endAngle:c,fill:d}=e;return s.jsxs("g",{children:[s.jsx(se,{cx:t,cy:a,innerRadius:n,outerRadius:r+8,startAngle:o,endAngle:c,fill:d}),s.jsx(se,{cx:t,cy:a,innerRadius:r+10,outerRadius:r+14,startAngle:o,endAngle:c,fill:d})]})}function qa(e){return t=>{const{index:a}=t;if(a===e)return Ja(t);const{cx:n,cy:r,innerRadius:o,outerRadius:c,startAngle:d,endAngle:i,fill:m}=t;return s.jsx(se,{cx:n,cy:r,innerRadius:o,outerRadius:c,startAngle:d,endAngle:i,fill:m})}}function Qa({assets:e,currencyCode:t}){const[a,n]=l.useState("type"),[r,o]=l.useState(void 0),c=l.useMemo(()=>{const h=new Map;for(const p of e){const g=W(p);h.has(p.type)||h.set(p.type,{name:p.type,value:0,items:[]});const v=h.get(p.type);v.value+=Math.abs(g),v.items.push({name:p.name,value:g})}return Array.from(h.values()).filter(p=>p.value>0)},[e]),d=l.useMemo(()=>c.map((h,p)=>Ba(h.name,p)),[c]),i=l.useMemo(()=>{let h=0,p=0;const g=[],v=[];for(const k of e){const N=W(k);N>=0?(h+=N,g.push({name:k.name,value:N})):(p+=Math.abs(N),v.push({name:k.name,value:N}))}return{slices:[{name:"Assets",value:h,items:g},...p>0?[{name:"Debts",value:p,items:v}]:[]],debtPct:h+p>0?p/(h+p)*100:0}},[e]),m=["#3b82f6","#ef4444"],b=a==="type"?c:i.slices,j=a==="type"?d:m,f=r!=null?b[r]:null,w=l.useMemo(()=>b.map(({name:h,value:p})=>({name:h,value:p})),[b]),O=l.useMemo(()=>qa(r),[r]);return s.jsxs("div",{className:"nw-donut-view",children:[s.jsxs("div",{className:"nw-donut-header",children:[s.jsx("span",{className:"nw-donut-title",children:"Portfolio Breakdown"}),s.jsxs("div",{className:"nw-donut-toggle",children:[s.jsx("button",{className:`nw-donut-toggle-btn${a==="type"?" nw-donut-toggle-btn--active":""}`,onClick:()=>{n("type"),o(void 0)},children:"Asset Type"}),s.jsx("button",{className:`nw-donut-toggle-btn${a==="debt"?" nw-donut-toggle-btn--active":""}`,onClick:()=>{n("debt"),o(void 0)},children:"Debts / Assets"})]})]}),a==="debt"&&i.debtPct>0&&s.jsxs("div",{className:"nw-debt-banner",children:[s.jsxs("span",{className:"nw-debt-pct",children:[i.debtPct.toFixed(1),"%"]}),s.jsx("span",{className:"nw-debt-label",children:"of your portfolio is debt"})]}),s.jsx("div",{className:"nw-donut-chart-area",children:s.jsx(de,{width:"100%",height:280,children:s.jsx($a,{children:s.jsx(Be,{data:w,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",innerRadius:65,outerRadius:110,paddingAngle:2,shape:O,onMouseEnter:(h,p)=>o(p),onMouseLeave:()=>o(void 0),children:w.map((h,p)=>s.jsx(ce,{fill:j[p%j.length]},p))})})})}),f&&s.jsxs("div",{className:"nw-donut-tooltip",children:[s.jsx("span",{className:"nw-donut-tooltip-title",children:f.name}),f.items.map((h,p)=>s.jsxs("div",{className:"nw-donut-tooltip-row",children:[s.jsx("span",{children:h.name}),s.jsx("span",{children:_(h.value,t)})]},p))]}),s.jsx("div",{className:"nw-donut-legend",children:b.map((h,p)=>s.jsxs("div",{className:"nw-donut-legend-item",children:[s.jsx("span",{className:"nw-donut-legend-swatch",style:{background:j[p%j.length]}}),s.jsx("span",{className:"nw-donut-legend-label",children:h.name}),s.jsx("span",{className:"nw-donut-legend-value",children:_(h.value,t)})]},h.name))})]})}function nn(){const{currency:e}=Ne(),{user:t}=Ve(),[a,n]=ze("vf-net-worth-data",za),r=l.useRef(!1);l.useEffect(()=>{!t||r.current||(r.current=!0,He(t.uid).then(u=>{u&&n(u)}).catch(u=>console.error("[net-worth] load failed:",u)))},[t,n]);const o=a.assets,c=a.customTypes,d=l.useCallback(u=>{n(y=>{const x={...u(y),lastModified:q()};return t&&Ue(t.uid,x).catch(R=>console.error("[net-worth] save failed:",R)),x})},[n,t]),[i,m]=l.useState(!1),[b,j]=l.useState(null),[f,w]=l.useState(!0),[O,h]=l.useState(null),[p,g]=l.useState(null),[v,k]=l.useState(!1),N=l.useMemo(()=>o.reduce((u,y)=>u+W(y),0),[o]),D=l.useMemo(()=>{const u=new Map;for(const y of o)u.has(y.type)||u.set(y.type,[]),u.get(y.type).push(y);return Array.from(u.entries()).sort((y,A)=>{const x=y[1].reduce(($,z)=>$+W(z),0);return A[1].reduce(($,z)=>$+W(z),0)-x})},[o]),C=l.useCallback(u=>{d(y=>{const A=y.assets.findIndex(x=>x.id===u.id);if(A>=0){const x=[...y.assets];return x[A]=u,{...y,assets:x}}return{...y,assets:[...y.assets,u]}}),m(!1),j(null)},[d]),S=l.useCallback(u=>{d(y=>({...y,assets:y.assets.filter(A=>A.id!==u)}))},[d]),E=l.useCallback((u,y)=>{d(A=>{const x=A.assets.findIndex(U=>U.id===u);if(x<0)return A;const R=A.assets[x],$=R.snapshots.filter(U=>U.date!==y);if($.length===0)return{...A,assets:A.assets.filter(U=>U.id!==u)};const z=[...A.assets];return z[x]={...R,snapshots:$,updatedAt:q()},{...A,assets:z}})},[d]),K=l.useCallback(u=>{d(y=>y.customTypes.includes(u)?y:{...y,customTypes:[...y.customTypes,u]})},[d]),T=b?o.find(u=>u.id===b):void 0,L=p?o.find(u=>u.id===p):void 0,M=l.useMemo(()=>{const u=new Set;for(const y of o)for(const A of y.snapshots)u.add(A.date);return u.size>=2},[o]);return s.jsx("div",{className:"page-container",children:s.jsxs("div",{className:"ps-page",children:[s.jsxs("div",{className:"nw-header",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"ps-page-title",children:"Net Worth"}),s.jsx("p",{className:"nw-subtitle",children:"Track your assets and watch your wealth grow over time."})]}),s.jsxs("div",{className:"nw-total-card",children:[s.jsx("span",{className:"nw-total-label",children:"Total Net Worth"}),s.jsx("span",{className:`nw-total-value${N<0?" nw-total-value--neg":""}`,children:_(N,e.code)})]})]}),L&&s.jsx(Ya,{asset:L,currencyCode:e.code,onDelete:E,onClose:()=>g(null)}),M&&s.jsxs("div",{className:"ps-card nw-chart-card",children:[s.jsxs("div",{className:"nw-chart-header",children:[s.jsx("h2",{className:"ps-card-title",children:v?"Portfolio Breakdown":"Net Worth Over Time"}),s.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[!v&&s.jsx("button",{className:"nw-toggle-btn",onClick:()=>w(!f),children:f?"Hide Chart":"Show Chart"}),s.jsx("button",{className:"ps-flip-btn",onClick:()=>k(!v),title:v?"Show chart":"Show breakdown",children:v?"ðŸ“ˆ Chart":"ðŸ© Breakdown"})]})]}),s.jsxs("div",{className:`nw-flip-container${v?" nw-flip-container--flipped":""}`,children:[s.jsx("div",{className:"nw-flip-face nw-flip-face--front",children:f&&s.jsx(Pe,{assets:o,currencyCode:e.code})}),s.jsx("div",{className:"nw-flip-face nw-flip-face--back",children:s.jsx(Qa,{assets:o,currencyCode:e.code})})]})]}),s.jsxs("div",{className:"ps-card nw-assets-card",children:[s.jsxs("div",{className:"nw-assets-header",children:[s.jsx("h2",{className:"ps-card-title",children:"Assets"}),!i&&!b&&s.jsx("button",{className:"nw-add-btn",onClick:()=>m(!0),title:"Add Asset",children:s.jsx("span",{className:"nw-add-icon",children:"+"})})]}),i&&!b&&s.jsx(Ae,{customTypes:c,onSave:C,onCancel:()=>m(!1),onNewCustomType:K}),b&&T&&s.jsx(Ae,{initial:T,customTypes:c,onSave:C,onCancel:()=>j(null),onNewCustomType:K}),o.length===0&&!i&&s.jsxs("div",{className:"nw-empty nw-empty--showcase",children:[s.jsx("p",{className:"nw-empty-intro",children:"Here's what your Net Worth dashboard could look like:"}),s.jsxs("div",{className:"nw-example-preview",children:[s.jsx(Pe,{assets:we,currencyCode:e.code}),s.jsx("div",{className:"nw-example-overlay"})]}),s.jsxs("div",{className:"nw-example-assets",children:[we.map((u,y)=>s.jsxs("div",{className:"nw-example-asset-card",children:[s.jsx("span",{className:"nw-asset-emoji",style:{background:`${G[y]}18`},children:u.emoji}),s.jsxs("div",{className:"nw-asset-info",children:[s.jsx("span",{className:"nw-asset-name",children:u.name}),s.jsx("span",{className:"nw-asset-type",children:u.type})]}),s.jsx("span",{className:"nw-asset-value",children:_(u.snapshots[u.snapshots.length-1].value,e.code)})]},u.id)),s.jsx("div",{className:"nw-example-overlay nw-example-overlay--assets"})]}),s.jsx("p",{className:"nw-empty-prompt",children:"Add your first asset to get started!"}),s.jsxs("div",{className:"nw-add-pulse-wrapper",children:[s.jsx("div",{className:"nw-add-pulse-ring"}),s.jsxs("button",{className:"nw-add-btn nw-add-btn--large nw-add-btn--animated",onClick:()=>m(!0),children:[s.jsx("span",{className:"nw-add-icon",children:"+"}),s.jsx("span",{children:"Add Your First Asset"})]})]})]}),D.map(([u,y])=>{const A=y.reduce((x,R)=>x+W(R),0);return s.jsxs("div",{className:"nw-type-group",children:[s.jsxs("div",{className:"nw-type-group-header",children:[s.jsx("span",{className:"nw-type-group-name",children:u}),s.jsx("span",{className:"nw-type-group-total",children:_(A,e.code)})]}),y.map(x=>s.jsxs("div",{children:[s.jsx("div",{onClick:()=>h(O===x.id?null:x.id),style:{cursor:x.snapshots.length>=2?"pointer":"default"},children:s.jsx(Xa,{asset:x,color:G[o.indexOf(x)%G.length],currencyCode:e.code,onEdit:()=>j(x.id),onDelete:()=>S(x.id),onShowHistory:()=>g(x.id)})}),O===x.id&&s.jsx(Za,{asset:x,currencyCode:e.code,color:G[o.indexOf(x)%G.length]})]},x.id))]},u)})]})]})})}export{nn as NetWorthPage};
