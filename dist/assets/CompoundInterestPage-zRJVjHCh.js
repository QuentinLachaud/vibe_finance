import{u as ae,a as se,b as ne,r as l,E as ie,j as e,L as le,f as g}from"./index-XQvDS8pc.js";import{R as re,C as ce,X as oe,Y as de,T as ue}from"./CartesianChart-CpPoxbx3.js";import{B as he,L as me,a as $}from"./BarChart-DhhkYR7w.js";function xe(a){const{initialInvestment:u,recurringInvestment:b,recurringFrequency:y,annualGrowthRate:x,annualDepositIncrease:w,years:p,mode:c}=a,R=x/100/12,d=[],Y=[];let i=u,v=u,h=0,L=0;const I=c==="withdrawal";for(let f=1;f<=p;f++){const A=Math.pow(1+w/100,f-1);if(y==="monthly"){const M=b*A;for(let s=1;s<=12;s++){if(I){const O=Math.min(M,Math.max(0,i));i-=O,h+=O}else i+=M,v+=M;i*=1+R,L++;const k=i-v+h;Y.push({month:L,year:f,monthInYear:s,deposits:Math.round(v),withdrawals:Math.round(h),interest:Math.round(k),totalValue:Math.round(i)})}}else{const M=b*A;if(I){const s=Math.min(M,Math.max(0,i));i-=s,h+=s}else i+=M,v+=M;for(let s=1;s<=12;s++){i*=1+R,L++;const k=i-v+h;Y.push({month:L,year:f,monthInYear:s,deposits:Math.round(v),withdrawals:Math.round(h),interest:Math.round(k),totalValue:Math.round(i)})}}const C=i-v+h;d.push({year:f,deposits:Math.round(v),withdrawals:Math.round(h),interest:Math.round(C),totalValue:Math.round(i)})}const W=i-v+h;return{futureValue:Math.round(i),totalInterest:Math.round(W),totalDeposits:Math.round(v),totalWithdrawals:Math.round(h),initialInvestment:u,yearByYear:d,monthByMonth:Y}}const _="#60a5fa",pe="#7c3aed",H="#f59e0b",je=[0,1,2,3,4,5];function ge({active:a,payload:u,label:b,currencyCode:y}){return!a||!(u!=null&&u.length)?null:e.jsxs("div",{className:"ci-tooltip",children:[e.jsxs("p",{className:"ci-tooltip-title",children:["Year ",b]}),u.map(x=>e.jsxs("p",{className:"ci-tooltip-row",children:[e.jsx("span",{className:"ci-tooltip-swatch",style:{background:x.color}}),x.name,": ",g(x.value,y)]},x.dataKey))]})}function q({value:a,onChange:u,symbol:b,ariaLabel:y}){const[x,w]=l.useState(a.toLocaleString("en-GB"));l.useEffect(()=>{w(a.toLocaleString("en-GB"))},[a]);const p=()=>{const c=Number(x.replace(/,/g,""));!isNaN(c)&&c>=0?u(c):w(a.toLocaleString("en-GB"))};return e.jsxs("div",{className:"ci-currency-input",children:[e.jsx("span",{className:"ci-currency-prefix",children:b}),e.jsx("input",{type:"text",inputMode:"numeric",value:x,onChange:c=>w(c.target.value),onBlur:p,"aria-label":y})]})}function U({value:a,onChange:u,suffix:b,ariaLabel:y,min:x=0,max:w}){const[p,c]=l.useState(String(a));l.useEffect(()=>{c(String(a))},[a]);const R=()=>{let d=Number(p);if(isNaN(d)){c(String(a));return}x!==void 0&&(d=Math.max(x,d)),w!==void 0&&(d=Math.min(w,d)),u(d)};return e.jsxs("div",{className:"ci-numeric-input",children:[e.jsx("input",{type:"text",inputMode:"decimal",value:p,onChange:d=>c(d.target.value),onBlur:R,"aria-label":y}),b&&e.jsx("span",{className:"ci-numeric-suffix",children:b})]})}function E({value:a,className:u}){const[b,y]=l.useState(a);return l.useEffect(()=>{y(a)},[a]),e.jsx("span",{className:`ci-animated-value ${u??""}`,children:b})}const X="vf-compound-interest";function be(){try{const a=localStorage.getItem(X);if(a)return JSON.parse(a)}catch{}return{}}function ye(){const{currency:a}=ae(),{gate:u,showLogin:b,onLoginSuccess:y,onLoginClose:x}=se(),w=ne(),p=l.useMemo(()=>be(),[]),[c,R]=l.useState(p.initialInvestment??1e4),[d,Y]=l.useState(p.recurringInvestment??500),[i,v]=l.useState(p.recurringFrequency??"monthly"),[h,L]=l.useState(p.mode??"deposit"),[I,W]=l.useState(p.annualGrowthRate??6),[f,A]=l.useState(p.annualDepositIncrease??2),[C,M]=l.useState(p.years??30);l.useEffect(()=>{try{localStorage.setItem(X,JSON.stringify({initialInvestment:c,recurringInvestment:d,recurringFrequency:i,mode:h,annualGrowthRate:I,annualDepositIncrease:f,years:C}))}catch{}},[c,d,i,h,I,f,C]);const s=h==="withdrawal",[k,O]=l.useState(!1),[j,z]=l.useState("annual"),[J,Q]=l.useState(0),G=c>=0&&d>=0&&I>=0&&I<=100&&C>0&&C<=100,n=l.useMemo(()=>G?xe({initialInvestment:c,recurringInvestment:d,recurringFrequency:i,annualGrowthRate:I,annualDepositIncrease:f,years:C,mode:h}):null,[c,d,i,I,f,C,h,G,J]),Z=l.useCallback(()=>{Q(t=>t+1)},[]),ee=l.useCallback(()=>{if(!n)return;const t=j==="annual"?n.yearByYear:n.monthByMonth,m=[(j==="annual"?["Year",s?"Withdrawn":"Deposits","Interest","Total Value"]:["Month",s?"Withdrawn":"Deposits","Interest","Total Value"]).join(",")];for(const T of t)if(j==="annual"&&"year"in T){const r=T;m.push([r.year,s?r.withdrawals:r.deposits,r.interest,r.totalValue].join(","))}else if("month"in T){const r=T;m.push([`Y${r.year} M${r.monthInYear}`,s?r.withdrawals:r.deposits,r.interest,r.totalValue].join(","))}const D=new Blob([m.join(`
`)],{type:"text/csv"}),o=URL.createObjectURL(D),F=document.createElement("a");F.href=o,F.download=`compound-interest-${j}.csv`,F.click(),URL.revokeObjectURL(o)},[n,j,s]),te=l.useCallback(()=>{if(!n)return;const t=new ie({unit:"mm",format:"a4"}),B=t.internal.pageSize.getWidth(),m=16,D=B-m*2;let o=16;t.setFillColor(11,17,32),t.rect(0,0,B,30,"F"),t.setFont("helvetica","bold"),t.setFontSize(18),t.setTextColor(241,245,249),t.text("Compound Interest Breakdown",m,14),t.setFont("helvetica","normal"),t.setFontSize(9),t.setTextColor(148,163,184),t.text(`TakeHomeCalc.co.uk  |  ${j==="annual"?"Annual":"Monthly"} View  |  ${s?"Withdrawal":"Deposit"} Mode`,m,22),o=36;const F=j==="annual"?n.yearByYear:n.monthByMonth,T=[j==="annual"?"Year":"Month",s?"Withdrawn":"Deposits","Interest","Total Value"],r=[m+2,m+D*.25,m+D*.5,m+D*.75];t.setFillColor(15,23,41),t.rect(m,o,D,7,"F"),t.setFont("helvetica","bold"),t.setFontSize(7),t.setTextColor(100,116,139),T.forEach((S,K)=>t.text(S,r[K],o+5)),o+=7,t.setFont("helvetica","normal"),t.setFontSize(8);const V=S=>a.symbol+Math.round(S).toLocaleString("en-GB");for(const S of F){if(o>275&&(t.addPage(),o=16),F.indexOf(S)%2===0&&(t.setFillColor(22,32,50),t.rect(m,o,D,6,"F")),t.setTextColor(148,163,184),"month"in S&&"monthInYear"in S){const N=S;t.text(`Y${N.year} M${N.monthInYear}`,r[0],o+4.5),t.text(V(s?N.withdrawals:N.deposits),r[1],o+4.5),t.text(V(N.interest),r[2],o+4.5),t.setTextColor(34,211,238),t.text(V(N.totalValue),r[3],o+4.5)}else{const N=S;t.text(String(N.year),r[0],o+4.5),t.text(V(s?N.withdrawals:N.deposits),r[1],o+4.5),t.text(V(N.interest),r[2],o+4.5),t.setTextColor(34,211,238),t.text(V(N.totalValue),r[3],o+4.5)}o+=6}t.setFont("helvetica","normal"),t.setFontSize(7),t.setTextColor(100,116,139),t.text("Generated by TakeHomeCalc.co.uk",B/2,t.internal.pageSize.getHeight()-8,{align:"center"}),t.save(`compound-interest-${j}.pdf`)},[n,j,s,a.symbol]),P=l.useMemo(()=>n?n.yearByYear.map(t=>{if(s){const B=Math.max(0,n.initialInvestment-t.withdrawals),m=t.totalValue-B;return{year:t.year,"Remaining Balance":Math.max(0,B),Interest:Math.max(0,m)}}return{year:t.year,"Initial Balance":n.initialInvestment,"Additional Deposits":t.deposits-n.initialInvestment,Interest:t.interest}}):[],[n,s]);return e.jsxs("div",{className:"ci-page",children:[b&&e.jsx(le,{onClose:x,onSuccess:y}),e.jsxs("div",{className:"page-header",children:[e.jsx("h1",{className:"page-title",children:"Compound Interest Calculator"}),e.jsx("p",{className:"page-subtitle",children:"Calculate how your investments grow over time with compounding."})]}),e.jsxs("div",{className:"ci-grid",children:[e.jsx("div",{className:"ci-left",children:e.jsxs("div",{className:"ci-card",children:[e.jsx("h2",{className:"ci-card-title",children:"Investment Details"}),e.jsx("div",{className:"ci-mode-toggle-field",children:e.jsxs("div",{className:"ci-mode-toggle-group",children:[e.jsx("button",{className:`ci-mode-btn ${s?"":"ci-mode-btn--active ci-mode-btn--deposit"}`,onClick:()=>L("deposit"),children:"Deposit"}),e.jsx("button",{className:`ci-mode-btn ${s?"ci-mode-btn--active ci-mode-btn--withdrawal":""}`,onClick:()=>L("withdrawal"),children:"Withdrawal"})]})}),e.jsxs("div",{className:"ci-field",children:[e.jsx("label",{className:"ci-label",children:"Initial Investment"}),e.jsx(q,{value:c,onChange:R,symbol:a.symbol,ariaLabel:"Initial investment amount"})]}),e.jsxs("div",{className:"ci-field",children:[e.jsx("label",{className:"ci-label",children:s?"Recurring Withdrawal":"Recurring Deposit"}),e.jsxs("div",{className:"ci-row",children:[e.jsx(q,{value:d,onChange:Y,symbol:a.symbol,ariaLabel:s?"Recurring withdrawal amount":"Recurring deposit amount"}),e.jsxs("div",{className:"ci-toggle",children:[e.jsx("button",{className:`ci-toggle-btn ${i==="monthly"?"ci-toggle-btn--active":""}`,onClick:()=>v("monthly"),children:"Monthly"}),e.jsx("button",{className:`ci-toggle-btn ${i==="annually"?"ci-toggle-btn--active":""}`,onClick:()=>v("annually"),children:"Annually"})]})]})]}),e.jsxs("div",{className:"ci-field",children:[e.jsx("label",{className:"ci-label",children:"Annual Growth Rate"}),e.jsx(U,{value:I,onChange:W,suffix:"%",ariaLabel:"Annual growth rate percentage",min:0,max:100})]}),e.jsxs("div",{className:"ci-field",children:[e.jsx("label",{className:"ci-label",children:s?"Annual Withdrawal Increase":"Annual Deposit Increase"}),e.jsx("div",{className:"ci-segment-group",children:je.map(t=>e.jsxs("button",{className:`ci-segment-btn ${f===t?"ci-segment-btn--active":""}`,onClick:()=>A(t),"aria-label":`${t}% annual ${s?"withdrawal":"deposit"} increase`,children:[t,"%"]},t))})]}),e.jsxs("div",{className:"ci-field",children:[e.jsx("label",{className:"ci-label",children:"Investment Period"}),e.jsx(U,{value:C,onChange:M,suffix:"years",ariaLabel:"Investment period in years",min:1,max:100})]}),e.jsx("button",{className:"calculate-btn ci-calculate-btn",disabled:!G,onClick:Z,"aria-label":"Calculate compound interest",children:"Calculate"})]})}),e.jsxs("div",{className:"ci-right",children:[n&&e.jsxs("div",{className:"ci-card ci-results-card",children:[e.jsx("h2",{className:"ci-card-title",children:"Results"}),e.jsxs("div",{className:"ci-results-grid",children:[e.jsxs("div",{className:"ci-result-item",children:[e.jsx("span",{className:"ci-result-label",children:"Future Value"}),e.jsx(E,{value:g(n.futureValue,a.code),className:"ci-result-value--green"})]}),e.jsxs("div",{className:"ci-result-item",children:[e.jsx("span",{className:"ci-result-label",children:"Total Interest Earned"}),e.jsx(E,{value:g(n.totalInterest,a.code),className:"ci-result-value--yellow"})]}),e.jsxs("div",{className:"ci-result-item",children:[e.jsx("span",{className:"ci-result-label",children:"Initial Balance"}),e.jsx(E,{value:g(c,a.code),className:"ci-result-value--blue"})]}),s?e.jsxs("div",{className:"ci-result-item",children:[e.jsx("span",{className:"ci-result-label",children:"Total Withdrawn"}),e.jsx(E,{value:g(n.totalWithdrawals,a.code),className:"ci-result-value--red"})]}):e.jsxs("div",{className:"ci-result-item",children:[e.jsx("span",{className:"ci-result-label",children:"Additional Deposits"}),e.jsx(E,{value:g(n.totalDeposits-n.initialInvestment,a.code),className:"ci-result-value--purple"})]})]})]}),n&&P.length>0&&e.jsxs("div",{className:"ci-card ci-chart-card",children:[e.jsx("h2",{className:"ci-card-title",children:s?"Portfolio Drawdown":"Portfolio Growth"}),e.jsx("div",{className:"ci-chart-container",children:e.jsx(re,{width:"100%",height:320,children:e.jsxs(he,{data:P,margin:{top:10,right:10,left:10,bottom:0},children:[e.jsx(ce,{strokeDasharray:"3 3",stroke:"var(--border-color)",vertical:!1}),e.jsx(oe,{dataKey:"year",tick:{fill:"var(--text-muted)",fontSize:11},axisLine:{stroke:"var(--border-color)"},tickLine:!1,tickFormatter:t=>P.length>20&&t%5!==0?"":`${t}`}),e.jsx(de,{tick:{fill:"var(--text-muted)",fontSize:11},axisLine:!1,tickLine:!1,tickFormatter:t=>t>=1e6?`${(t/1e6).toFixed(1)}M`:t>=1e3?`${(t/1e3).toFixed(0)}K`:String(t)}),e.jsx(ue,{content:e.jsx(ge,{currencyCode:a.code}),cursor:{fill:"rgba(255,255,255,0.03)"}}),e.jsx(me,{wrapperStyle:{fontSize:12,color:"var(--text-secondary)"}}),s?e.jsxs(e.Fragment,{children:[e.jsx($,{dataKey:"Remaining Balance",stackId:"portfolio",fill:_,radius:[0,0,0,0],animationDuration:800}),e.jsx($,{dataKey:"Interest",stackId:"portfolio",fill:H,radius:[4,4,0,0],animationDuration:800})]}):e.jsxs(e.Fragment,{children:[e.jsx($,{dataKey:"Initial Balance",stackId:"portfolio",fill:_,radius:[0,0,0,0],animationDuration:800}),e.jsx($,{dataKey:"Additional Deposits",stackId:"portfolio",fill:pe,radius:[0,0,0,0],animationDuration:800}),e.jsx($,{dataKey:"Interest",stackId:"portfolio",fill:H,radius:[4,4,0,0],animationDuration:800})]})]})})})]})]})]}),n&&e.jsxs("div",{className:"ci-card ci-table-card ci-table-card--full",children:[e.jsxs("div",{className:"ci-table-header",children:[e.jsxs("button",{className:"ci-table-toggle",onClick:()=>O(t=>!t),"aria-expanded":k,"aria-label":"Toggle breakdown table",children:[e.jsx("span",{children:"Breakdown Table"}),e.jsx("span",{className:`ci-table-arrow ${k?"ci-table-arrow--open":""}`,children:"▼"})]}),k&&e.jsxs("div",{className:"ci-table-controls",children:[e.jsxs("div",{className:"ci-table-view-toggle",children:[e.jsx("button",{className:`ci-toggle-btn ${j==="annual"?"ci-toggle-btn--active":""}`,onClick:()=>z("annual"),children:"Annual"}),e.jsx("button",{className:`ci-toggle-btn ${j==="monthly"?"ci-toggle-btn--active":""}`,onClick:()=>z("monthly"),children:"Monthly"})]}),e.jsxs("div",{className:"ci-export-group",children:[e.jsxs("button",{className:"ci-export-btn",onClick:()=>u(()=>ee()),children:[e.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),e.jsx("polyline",{points:"7 10 12 15 17 10"}),e.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),"CSV"]}),e.jsxs("button",{className:"ci-export-btn",onClick:()=>u(()=>te()),children:[e.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),e.jsx("polyline",{points:"7 10 12 15 17 10"}),e.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),"PDF"]})]})]})]}),e.jsx("div",{className:`ci-table-body ${k?"ci-table-body--open":""}`,children:e.jsx("div",{className:"ci-table-scroll",children:e.jsxs("table",{className:"ci-table","aria-label":"Compound interest breakdown",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"ci-th ci-th--left",children:j==="annual"?"Year":"Month"}),e.jsx("th",{className:"ci-th ci-th--right",children:s?"Withdrawn":"Deposits"}),e.jsx("th",{className:"ci-th ci-th--right",children:"Interest"}),e.jsx("th",{className:"ci-th ci-th--right",children:"Total Value"})]})}),e.jsx("tbody",{children:j==="annual"?n.yearByYear.map(t=>e.jsxs("tr",{className:"ci-tr",children:[e.jsx("td",{className:"ci-td ci-td--left",children:t.year}),e.jsx("td",{className:"ci-td ci-td--right",children:s?g(t.withdrawals,a.code):g(t.deposits,a.code)}),e.jsx("td",{className:"ci-td ci-td--right ci-td--interest",children:g(t.interest,a.code)}),e.jsx("td",{className:"ci-td ci-td--right ci-td--total",children:g(t.totalValue,a.code)})]},t.year)):n.monthByMonth.map(t=>e.jsxs("tr",{className:"ci-tr",children:[e.jsxs("td",{className:"ci-td ci-td--left",children:["Y",t.year," M",t.monthInYear]}),e.jsx("td",{className:"ci-td ci-td--right",children:s?g(t.withdrawals,a.code):g(t.deposits,a.code)}),e.jsx("td",{className:"ci-td ci-td--right ci-td--interest",children:g(t.interest,a.code)}),e.jsx("td",{className:"ci-td ci-td--right ci-td--total",children:g(t.totalValue,a.code)})]},t.month))})]})})})]}),n&&e.jsx("div",{className:"ci-simulate-cta",children:e.jsx("button",{className:"thp-cta",onClick:()=>w("/portfolio"),children:"Build Your Future Scenarios →"})})]})}export{ye as CompoundInterestPage};
